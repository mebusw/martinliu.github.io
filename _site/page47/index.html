<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Martin's Blog</title>
<meta name="description" content="DevOps Coach & Cloud Expert">
<meta name="keywords" content="DevOps, Cloud, AWS, HCI, Nutanix, ITSM">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://martinliu.cn/images/path.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="DevOps Coach & Cloud Expert">
<meta name="twitter:creator" content="@zliu">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="DevOps Coach & Cloud Expert">
<meta property="og:url" content="http://martinliu.cn/page47/">
<meta property="og:site_name" content="Martin's Blog">

<meta name="google-site-verification" content="4oSwNTpy1vzip3_lt6XhkhMfImCD_DZlvL3K1k-M8qk">



<link rel="canonical" href="http://martinliu.cn/page47/">
<link href="http://martinliu.cn/feed.xml" type="application/atom+xml" rel="alternate" title="Martin's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://martinliu.cn/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://martinliu.cn/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://martinliu.cn/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://martinliu.cn/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://martinliu.cn/images/apple-touch-icon.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://martinliu.cn/images/apple-touch-icon-72x72.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://martinliu.cn/images/apple-touch-icon-114x114.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://martinliu.cn/images/apple-touch-icon-144x144.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://martinliu.cn/">首页</a></li>
		<li>
			<a href="#">关于</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://martinliu.cn/images/avatar.jpg" alt="Martin Liu photo" class="author-photo">
					<h4>Martin Liu</h4>
					<p>DevOps Coach, Cloud Expert, Runner</p>
				</li>
				<li><a href="http://martinliu.cn/about/"><span class="btn btn-inverse">详情</span></a></li>
				<li>
					<a href="mailto:67120666@qq.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/zliu"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+MartinLiu-cn"><i class="fa fa-fw fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="https://linkedin.com/in/liuzheng"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/martinliu"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">文章</a>
			<ul class="dl-submenu">
				<li><a href="http://martinliu.cn/posts/">所有文章</a></li>
				<li><a href="http://martinliu.cn/tags/">所有分类</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="http://www.aws-faq.com" target="_blank">AWS-FAQ</a></li>
	  
	    
	    <li><a href="http://devopscoach.org" target="_blank">DevOps教练</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="http://martinliu.cn/images/path.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Martin's Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-07-01T00:33:43+08:00"><a href="http://martinliu.cn/2012/07/01/e6-9b-b4-e6-96-b0-e5-88-b0wordpress34/">July 01, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2012/07/01/e6-9b-b4-e6-96-b0-e5-88-b0wordpress34/" rel="bookmark" title="更新到WordPress 3.4" itemprop="url">更新到WordPress 3.4</a></h1>
    
  </header>
  <div class="entry-content">
    <p>一直以来没有时间和心情更新这个站点，终于最近抽出一些时间搭理了一下。记得以前最喜欢折腾的就是Theme，晚上一搞就是很晚才睡，睡之前往往很后悔，一般结果都是恢复到之前的Theme，现在省事多了，基本上没一年左右更新一次，其它时间，有空了多多关注内容。本次站点更新的情况如下，特此记录一下：</p>

<ul>
  <li>
    <p>升级到最新版的WP3.4</p>
  </li>
  <li>
    <p>更新了一个更简洁的模板，使用了定制的header图片，是一副古画的上下两部分</p>
  </li>
  <li>
    <p>关闭掉了一些不用的插件</p>
  </li>
</ul>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-07-01T00:03:55+08:00"><a href="http://martinliu.cn/2012/07/01/e5-a6-82-e4-bd-95-e5-88-a0-e9-99-a4-e5-b7-b2-e7-bb-8f-e4-b8-8a-e4-bc-a0-e7-9a-84header-e5-9b-be-e7-89-87/">July 01, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2012/07/01/e5-a6-82-e4-bd-95-e5-88-a0-e9-99-a4-e5-b7-b2-e7-bb-8f-e4-b8-8a-e4-bc-a0-e7-9a-84header-e5-9b-be-e7-89-87/" rel="bookmark" title="如何删除已经上传的Header图片" itemprop="url">如何删除已经上传的Header图片</a></h1>
    
  </header>
  <div class="entry-content">
    <p><img src="http://cdn1.martinliu.cn/wp-content/uploads/2012/07/WordPress2.png" alt="" />Wordpress的Header增加了很多新功能，包括Header图片的上传和定制，可以使用一组细化的图片，在不同的帖子之间做随机显示。</p>

<p>第一次测试这个功能的时候，上传了2张不好看的图片。后来想把它们都扯下来；发现在Header图片上传的地方是没有删除已经上传的图片的选择的。</p>

<p>google之后，发现处理方法很简单，在Dashboard上选择media，选择Library，在图片清单中找到需要删除的图片，选择删除动作即可。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-06-29T23:18:04+08:00"><a href="http://martinliu.cn/2012/06/29/cloudstack-quick-install-guide/">June 29, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2012/06/29/cloudstack-quick-install-guide/" rel="bookmark" title="CloudStack Quick install guide (中文精编版)" itemprop="url">CloudStack Quick install guide (中文精编版)</a></h1>
    
  </header>
  <div class="entry-content">
    <p>This post has a English version,<a href="http://martinliu.cn/2012/08/cloudstack-quick-install-guide-english-mini-version.html"> click here</a>
测试环境描述：
两台硬件配置足够高的笔记本电脑，链接在一个交换机上，都能够上网。</p>

<p><a href="http://martinliu.cn/2012/06/cloudstack-quick-install-guide.html/img_0841"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2012/06/IMG_0841.jpg" alt="" /></a></p>

<p>安装过程：第一步安装RHEL6管理服务器操作系统；第二部安装CloudStack软件；第三步安装Xenserver；第四步：初始化配置CloudStack</p>

<p>安装RHEL6 64bit操作系统的注意事项：</p>

<ol>
  <li>
    <p>使用全域名作为主机名，例如 ：cloudstack.xen.cn； 安装完后 hostname –fqdn 查一下</p>
  </li>
  <li>
    <p>使用ntp服务器 0~3.xenserver.pool.ntp.org</p>
  </li>
  <li>
    <p>选择桌面类型安装，同时安装Mysql server/client</p>
  </li>
  <li>
    <p>配置为静态ip地址，网关和DNS还要保证装完之后，能够上互联网</p>
  </li>
  <li>
    <p>关闭防火墙，这样可以省去安装文档中iptables相关的端口设置，加速安装过程</p>
  </li>
</ol>

<p>安装Cladestack的时候需要同时安装系统的几个依赖的软件包，所以要把本地的DVD设置为yum的源挂载DVD到/media目录，之前必须安装几个依赖的包
[shell]
mount /dev/cdrom /media
yum install deltarpm-3.5-0.5.20090913git.el6.x86_64.rpm
yum install python-deltarpm-3.5-0.5.20090913git.el6.x86_64.rpm
yum install createrepo-0.9.8-4.el6.noarch.rpm
[/shell]</p>

<p>首先生成一个yum源的文件，如下所示：
[shell]
[root@cloudstack 1] cat /etc/yum.repos.d/rhel6.repo
[rhel6]
name=rhel6
baseurl=file:///media/
enabled=1
gpgcheck=0
[/shell]</p>

<p>用 yum list 检查一下dvd源是否正常。</p>

<p>现在既可以进入CloudStack的安装过程了，下载并解压缩安装包
[shell]
tar xzvf CloudStack-oss-3.0.2-1-rhel6.2.tar.gz
./install #运行安装命令
选择 m
选择 y
[/shell]</p>

<p>安装脚本使用yum安装所有的文件，它能够查出系统上还差那些包，依赖的包会通过yum一次性安装，安装过程如下所示：</p>

<p>[shell]
tomcat6-lib                          noarch          6.0.24-33.el6               rhel6               2.9 M
tomcat6-servlet-2.5-api              noarch          6.0.24-33.el6               rhel6                93 k
ws-commons-util                      noarch          1.0.1-13.el6                rhel6                37 k
wsdl4j                               noarch          1.5.2-7.8.el6               rhel6               157 k
xml-commons-apis                     x86_64          1.3.04-3.6.el6              rhel6               439 k
xml-commons-resolver                 x86_64          1.1-4.18.el6                rhel6               145 k</p>

<h1 id="transaction-summary">Transaction Summary</h1>
<p>Install      38 Package(s)</p>

<p>Total download size: 91 M
Installed size: 172 M
Is this ok [y/N]: y
Downloading Packages:
————————————————————————————————————
Total                                                                       115 MB/s |  91 MB     00:00
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
Installing : libgcj-4.4.6-3.el6.x86_64                                                               1/38
Installing : jakarta-commons-logging-1.0.4-10.el6.noarch                                             2/38
Installing : cloud-deps-3.0.2-1.el6.x86_64                                                           3/38
Installing : cloud-utils-3.0.2-1.el6.x86_64                                                          4/38</p>

<p>Installed:
cloud-client.x86_64 0:3.0.2-1.el6</p>

<p>Dependency Installed:
axis.noarch 0:1.2.1-7.2.el6                            bcel.x86_64 0:5.2-7.2.el6
classpathx-jaf.x86_64 0:1.0-15.4.el6                   classpathx-mail.noarch 0:1.1.1-9.4.el6
cloud-agent-scripts.x86_64 0:3.0.2-1.el6               cloud-client-ui.x86_64 0:3.0.2-1.el6
cloud-core.x86_64 0:3.0.2-1.el6                        cloud-deps.x86_64 0:3.0.2-1.el6
cloud-python.x86_64 0:3.0.2-1.el6                      cloud-server.x86_64 0:3.0.2-1.el6
cloud-setup.x86_64 0:3.0.2-1.el6                       cloud-utils.x86_64 0:3.0.2-1.el6
ecj.x86_64 1:3.4.2-6.el6                               ipmitool.x86_64 0:1.8.11-12.el6
jakarta-commons-collections.noarch 0:3.2.1-3.4.el6     jakarta-commons-daemon.x86_64 1:1.0.1-8.9.el6
jakarta-commons-dbcp.noarch 0:1.2.1-13.8.el6           jakarta-commons-discovery.noarch 1:0.4-5.4.el6
jakarta-commons-httpclient.x86_64 1:3.1-0.6.el6        jakarta-commons-logging.noarch 0:1.0.4-10.el6
jakarta-commons-pool.x86_64 0:1.3-12.7.el6             java-1.5.0-gcj.x86_64 0:1.5.0.0-29.1.el6
java_cup.x86_64 1:0.10k-5.el6                          libgcj.x86_64 0:4.4.6-3.el6
log4j.x86_64 0:1.2.14-6.4.el6                          mx4j.noarch 1:3.0.1-9.13.el6
regexp.x86_64 0:1.5-4.4.el6                            sinjdoc.x86_64 0:0.5-9.1.el6
tomcat6.noarch 0:6.0.24-33.el6                         tomcat6-el-2.1-api.noarch 0:6.0.24-33.el6
tomcat6-jsp-2.1-api.noarch 0:6.0.24-33.el6             tomcat6-lib.noarch 0:6.0.24-33.el6
tomcat6-servlet-2.5-api.noarch 0:6.0.24-33.el6         ws-commons-util.noarch 0:1.0.1-13.el6
wsdl4j.noarch 0:1.5.2-7.8.el6                          xml-commons-apis.x86_64 0:1.3.04-3.6.el6
xml-commons-resolver.x86_64 0:1.1-4.18.el6</p>

<p>Complete!
Done
[/shell]
以上的命令表示管理服务器组件正常安装成功。</p>

<p>下面需要安装数据库部分，再次运行安装脚本：
[shell]
./install
&gt; 选择 d
Installing the MySQL server…
Loaded plugins: product-id, refresh-packagekit, security, subscription-manager
Updating certificate-based repositories.
cloud-temp                                                                          | 2.6 kB     00:00 …
rhel6                                                                               | 4.0 kB     00:00 …
Setting up Install Process
Package mysql-server-5.1.52-1.el6_0.1.x86_64 already installed and latest version
Nothing to do
Starting the MySQL server…
初始化 MySQL 数据库： Installing MySQL system tables…
OK
Filling help tables…
OK</p>

<p>To start mysqld at boot time you have to copy
support-files/mysql.server to the right place for your system</p>

<p>PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
To do so, start the server, then issue the following commands:</p>

<p>/usr/bin/mysqladmin -u root password ‘new-password’
/usr/bin/mysqladmin -u root -h cloudstack.xen.cn password ‘new-password’</p>

<p>Alternatively you can run:
/usr/bin/mysql_secure_installation</p>

<p>which will also give you the option of removing the test
databases and anonymous user created by default.  This is
strongly recommended for production servers.</p>

<p>See the manual for more instructions.</p>

<p>You can start the MySQL daemon with:
cd /usr ; /usr/bin/mysqld_safe &amp;</p>

<p>You can test the MySQL daemon with mysql-test-run.pl
cd /usr/mysql-test ; perl mysql-test-run.pl</p>

<p>Please report any problems with the /usr/bin/mysqlbug script!</p>

<p>[确定]
正在启动 mysqld：                                          [确定]
Done
[/shell]</p>

<p>以上表明数据库部分安装成功，还需要把mysql的几个参数调整一下，编辑配置文件，实例文件如下</p>

<p>[shell]
cat /etc/my.cfn
[mysqld]
datadir=/var/lib/mysql
#加入的部分
innodb_rollback_on_timeout=1
innodb_lock_wait_timeout=600
max_connections=350
log-bin=mysql-bin
binlog-format = ‘ROW’
#加入的部分
socket=/var/lib/mysql/mysql.sock
user=mysql
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0</p>

<p>[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
[/shell]
重启动mysql让参数生效：
[shell]
[root@cloudstack CloudStack-oss-3.0.2-1-rhel6.2] service mysqld restart
停止 mysqld：                                              [确定]
正在启动 mysqld：                                          [确定]
[/shell]
给mysql的root用户设置密码
[shell]
[root@cloudstack home] mysql -u root
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 5.1.52-log Source distribution</p>

<p>Copyright (c) 2000, 2010, Oracle and/or its affiliates. All rights reserved.
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL v2 license</p>

<p>Type ‘help;’ or ‘\h’ for help. Type ‘\c’ to clear the current input statement.</p>

<p>mysql&gt; set password = password(‘citrix’);
Query OK, 0 rows affected (0.00 sec)</p>

<p>mysql&gt; exit
Bye
[/shell]
初始化Cloudtack管理服务器的数据库
[shell]
[root@cloudstack home] cloud-setup-databases cloud:citrix@localhost –deploy-as=root:citrix
Mysql user name:cloud                                                           [ OK ]
Mysql user password:citrix                                                      [ OK ]
Mysql server ip:localhost                                                       [ OK ]
Mysql server port:3306                                                          [ OK ]
Mysql root user name:root                                                       [ OK ]
Mysql root user password:citrix                                                 [ OK ]
Checking Cloud database files …                                               [ OK ]
Checking local machine hostname …                                             [ OK ]
Checking SELinux setup …                                                      [ OK ]
Detected local IP address as 192.168.10.15, will use as cluster management server node IP[ OK ]
Preparing /etc/cloud/management/db.properties                                   [ OK ]
Applying /usr/share/cloud/setup/create-database.sql                             [ OK ]
Applying /usr/share/cloud/setup/create-schema.sql                               [ OK ]
Applying /usr/share/cloud/setup/create-database-premium.sql                     [ OK ]
Applying /usr/share/cloud/setup/create-schema-premium.sql                       [ OK ]
Applying /usr/share/cloud/setup/server-setup.sql                                [ OK ]
Applying /usr/share/cloud/setup/templates.sql                                   [ OK ]
Applying /usr/share/cloud/setup/create-index-fk.sql                             [ OK ]
Processing encryption …                                                       [ OK ]
Finalizing setup …                                                            [ OK ]</p>

<p>CloudStack has successfully initialized database, you can check your database configuration in /etc/cloud/management/db.properties
[/shell]
数据库初始化完毕，下面需要运行管理服务器初始化命令。
[shell]
[root@cloudstack home] cloud-setup-management
Starting to configure CloudStack Management Server:
Configure sudoers …         [OK]
Configure Firewall …        [OK]
Configure CloudStack Management Server …[OK]
CloudStack Management Server setup is Done!
[/shell]</p>

<p>以上管理节点的部分安装完毕。安装文档的需求，管理服务器需要挂一个16TB大小的NFS存储，如果环境中没有这个大的存储建议，使用足够大的硬盘做一个NFS的share用来测试，下面是相关的命令
[shell]
[root@cloudstack ~] service rpcbind start
[root@cloudstack ~] service nfs start
启动 NFS 服务：                                            [确定]
关掉 NFS 配额：                                            [确定]
启动 NFS 守护进程：                                        [确定]
启动 NFS mountd：                                          [确定]
[root@cloudstack ~] chkconfig nfs on
[root@cloudstack ~] chkconfig rpcbind on
[root@cloudstack home] cd /home
[root@cloudstack home] mkdir primary
[root@cloudstack home] mkdir secondary
[root@cloudstack home] vi /etc/exports   #编辑nfs路径
[root@cloudstack home] cat /etc/exports  #实例如下
/home    *(rw,async,no_root_squash)
[root@cloudstack home] exportfs -a    #检查nfs共享目录的结果
[root@cloudstack home] exportfs
/home             <world>
[/shell]</world></p>

<p>编辑 /etc/sysconfig/nfs 配置文件，保证它包含一下这些参数
[shell]
MOUNTD_NFS_V3=”yes”
LOCKD_TCPPORT=32803
LOCKD_UDPPORT=32769
MOUNTD_PORT=892
RQUOTAD_PORT=875
STATD_PORT=662
STATD_OUTGOING_PORT=2020
[/shell]
重新启动nfs服务，在一个已经安装好的XenServer上做一下测试。保证Xenerver能够正常读写这个目录，相关命令如下：
[shell]
[root@xs root]mkdir test
[root@xs root]mount 192.168.10.15:/home  /root/test
[root@xs root]ls test
[root@xs root]touch testfile   #这个文件应该在两边的都能ls到
[/shell]</p>

<p>在保证管理服务器能上网的情况下，运行如下命令，为管理服务器从网上下载相关的模板文件
[shell]
/usr/lib64/cloud/agent/scripts/storage/secondary/cloud-install-sys-tmplt -m /home/secondary -u http://download.cloud.com/templates/acton/acton-systemvm-02062012.vhd.bz2 -h xenserver -F
正在解析主机 download.cloud.com… 207.171.189.81
正在连接 download.cloud.com|207.171.189.81|:80… 已连接。
已发出 HTTP 请求，正在等待回应… 200 OK
长度：140616708 (134M) [binary/octet-stream]</p>

<p>99% [===================================================================================================&gt; ] 140,512,160  149K/s eta(英国中部时
99% [===================================================================================================&gt; ] 140,551,600  145K/s eta(英国中部时
100%[====================================================================================================&gt;] 140,616,708  155K/s   in 11m 27s
2012-06-29 20:03:57 (200 KB/s) - 已保存 “/usr/lib64/cloud/agent/scripts/storage/secondary/a5fc3577-c5e7-49ff-8fbf-ed88dc8aaff5.vhd” [140616708/140616708])</p>

<p>Uncompressing to /usr/lib64/cloud/agent/scripts/storage/secondary/a5fc3577-c5e7-49ff-8fbf-ed88dc8aaff5.vhd.tmp (type bz2)…could take a long time
Moving to /home/secondary/template/tmpl/1/1///a5fc3577-c5e7-49ff-8fbf-ed88dc8aaff5.vhd…could take a while
Successfully installed system VM template  to /home/secondary/template/tmpl/1/1/
[/shell]
到下载的路径下面ls一下，确认下载成功。</p>

<p>下面选择一台配置好的服务器来安装XenServer，这台服务器最好也能上网，和管理节点的服务器在一个网段里。
安装注意事项：</p>

<ol>
  <li>
    <p>下载最新版的6.0.201安装盘，最新版的cloudstack必须要这个版本以上的xenserver</p>
  </li>
  <li>
    <p>网络配置为能上网的设置，方便下载东西</p>
  </li>
  <li>
    <p>用ntp服务器 0~3.xenserver.pool.ntp.org</p>
  </li>
</ol>

<p>安装后从管理服务器上ssh到xenServer命令行，需要下载cloudstack相关的安装包。执行如下命令：
[shell]
[root@cloudstack .ssh]# ssh 192.168.10.10   #这是xenserver的地址
The authenticity of host ‘192.168.10.10 (192.168.10.10)’ can’t be established.
RSA key fingerprint is ae:5b:8a:dc:2a:c8:6c:56:f6:7a:48:02:e6:db:78:dd.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added ‘192.168.10.10’ (RSA) to the list of known hosts.
root@192.168.10.10’s password:
Type “xsconsole” for access to the management console.
[root@hpxs1 ~] pwd
/root
[root@hpxs1 ~] mkdir tmp
[root@hpxs1 ~] cd tmp
[root@hpxs1 tmp] wget http://download.cloud.com/releases/3.0.1/XS-6.0.2/xenserver-cloud-supp.tgz
–2012-06-29 21:55:08–  http://download.cloud.com/releases/3.0.1/XS-6.0.2/xenserver-cloud-supp.tgz
Resolving download.cloud.com… 207.171.185.201
Connecting to download.cloud.com|207.171.185.201|:80… connected.
HTTP request sent, awaiting response… 200 OK
Length: 3342001 (3.2M) [application/x-tar]
Saving to: `xenserver-cloud-supp.tgz’</p>

<p>100%[================================================================&gt;] 3,342,001    217K/s   in 15s</p>

<p>2012-06-29 21:55:49 (214 KB/s) - `xenserver-cloud-supp.tgz’ saved [3342001/3342001]
[root@hpxs1 tmp] tar xf xenserver-cloud-supp.tgz
[root@hpxs1 tmp] ls
example-answerfile   post-install.sh  src                       xenserver-cloud-supp.tgz
packages.cloud-supp  README           xenserver-cloud-supp.iso
[root@hpxs1 tmp] xe-install-supplemental-pack xenserver-cloud-supp.iso
Installing ‘XenServer Cloud Supp Pack’…</p>

<p>Preparing…                ########################################### [100%]
1:iptables               ########################################### [ 10%]
2:iptables-ipv6          ########################################### [ 20%]
3:arptables              ########################################### [ 30%]
4:iptables-debuginfo     ########################################### [ 40%]
5:ipset-modules-kdump-2.6########################################### [ 50%]
6:ipset-modules-xen-2.6.3########################################### [ 60%]
7:csp-pack               ########################################### [ 70%]
8:ebtables               ########################################### [ 80%]
9:ipset                  ########################################### [ 90%]
10:iptables-devel         ########################################### [100%]
Update sysctl to enable <em>tables checking
Memory required by all installed packages: 894697472
Truncating to static-max: 789839872
Setting VM.memory_target: 789839872
Pack installation successful.
[root@hpxs1 tmp]
[root@hpxs1 tmp] xe-switch-network-backend bridge
Cleaning up old ifcfg files
Remove… ifcfg-xenbr0
Disabling openvswitch daemon
Configure system for bridge networking
You *MUST</em> now reboot your system
[root@hpxs1 tmp] reboot
[/shell]
测试xenserver是否能够正常链接管理服务器的nfs目录
[shell]
[root@hpxs1 ~] mkdir nfs
[root@hpxs1 ~] mount 192.168.10.15:/home/primary /root/nfs
[root@hpxs1 ~] cd nfs
[root@hpxs1 nfs] touch testfile
[root@hpxs1 nfs] ls
testfile   #到管理服务器端查看是否有该文件存在
[/shell]
下面进入图形界面的初始化屏幕。进入之后的配置向导如下图集所示。
[nggallery id=14]</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-06-19T12:18:59+08:00"><a href="http://martinliu.cn/2012/06/19/android-ios-access-scure/">June 19, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2012/06/19/android-ios-access-scure/" rel="bookmark" title="[Citrix白皮书] 通过 Android 和 Apple iOS 设备安全地访问企业信息" itemprop="url">[Citrix白皮书] 通过 Android 和 Apple iOS 设备安全地访问企业信息</a></h1>
    
  </header>
  <div class="entry-content">
    <p>无论是在家里还是在公司，智能电话和平板电脑等个人设备已大大延展了我们生活工作的范围。其灵活性和移动性满足了人们随时随地办公的需要，与此同时给 IT 部门提出了新的安全挑战。思杰技术支持企业允许员工使用个人的<a href="http://edm.orioncreative.com.au/t/y-l-jlhikjt-sdrqujhr-i/"> Android 和 Apple iOS </a>移动设备办公，同时有效地管控并确保企业信息安全。</p>

<p>设计安全的思杰虚拟化解决方案使 IT 部门可以安全无忧地将企业办公应用系统从数据中心安全地交付至个人设备，满足员工移动办公的需求，而 IT 部门只需：</p>
<table cellpadding="0" cellspacing="0" border="0">
<tbody>
<tr>

<td width="25" align="right" valign="top">•
</td>

<td align="left" valign="top">将桌面和应用集中部署在数据中心，然后安全地按需交付到任何设备上
</td>
</tr>
<tr>

<td width="25" align="right" valign="top">•
</td>

<td align="left" valign="top">通过基于策略的接入控制和 SSL 身份验证保护信息
</td>
</tr>
<tr>

<td width="25" align="right" valign="top">•
</td>

<td align="left" valign="top">随时随地通过任何设备实现安全的文件共享和同步
</td>
</tr>
<tr>

<td width="25" align="right" valign="top">•
</td>

<td align="left" valign="top">在设备被盗或丢失的情况下通过远程数据擦除功能确保信息安全
</td>
</tr>
</tbody>
</table>
<p><a href="http://martinliu.cn/2012/06/android-ios-access-scure.html/edm-header_0"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2012/06/edm-header_0.jpg" alt="" /></a></p>

<p>了解如何确保 Android 、 Apple iOS 的平板电脑、智能电话等个人移动设备安全访问企业办公系统，满足员工办公对灵活性和移动性需求，提升办公效率，同时帮助 IT 部门实现有效的管控，确保企业信息安全。</p>

<p><a href="http://edm.orioncreative.com.au/t/y-l-jlhikjt-sdrqujhr-d/"><strong>立即下载《通过 Android 和 Apple iOS 设备安全地访问企业信息》。</strong></a></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-06-18T12:28:33+08:00"><a href="http://martinliu.cn/2012/06/18/xendesktop-multi-monitor/">June 18, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2012/06/18/xendesktop-multi-monitor/" rel="bookmark" title="XenDesktop多屏幕显示" itemprop="url">XenDesktop多屏幕显示</a></h1>
    
  </header>
  <div class="entry-content">
    <p>[转帖] 说明：当客户端使用多个显示器时，连接XenDesktop默认只会使用主屏幕，不会使用扩展屏。如何使用扩展屏？</p>

<p>A.首先将Client端连接好多个显示器，并设置好是扩展屏还是Mirror方式1-手动实现：连接到XenDesktop桌面，退出全屏显示切换成窗口式，将调整XenDesktop窗口大小至多个屏幕中（通过鼠标拉窗口大小来完成），在点击全屏即可。方式2-自动实现：修改WI上的default.ica文件， default.ica文件位于C:\Inetpub\wwwroot\Citrix\DesktopWeb\conf for Web Interface clientC:\Inetpub\wwwroot\Citrix\PNAgent\conf for Program Neighborhood Agent。在[Application] 中添加 ConnectionBar=0
BTW：如何限制Multi-monitor的数量？通过Display memory Limit来控制。</p>

<p>目前我在一个项目中测试的效果如下，使用WYSE的瘦客户机，同时连接4个显示器。扩展显示桌面。</p>

<p><a href="http://martinliu.cn/wp-content/gallery/citrix/img_0805.jpg"><img src="http://martinliu.cn/wp-content/gallery/citrix/thumbs/thumbs_img_0805.jpg" alt="img_0805" /></a></p>

<p><a href="http://martinliu.cn/wp-content/gallery/citrix/img_0806.jpg"><img src="http://martinliu.cn/wp-content/gallery/citrix/thumbs/thumbs_img_0806.jpg" alt="img_0806" /></a></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="http://martinliu.cn/page46/" class="btn">向前</a></li>
      
    

    
    
      <li><a href="http://martinliu.cn">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="http://martinliu.cn/page45/">45</a></li>
      
    
      
        
        
        
        <li><a href="http://martinliu.cn/page46/">46</a></li>
      
    
      
        <li><strong class="current-page">47</strong></li>
      
    
      
        
        
        
        <li><a href="http://martinliu.cn/page48/">48</a></li>
      
    
      
        
        
        
        <li><a href="http://martinliu.cn/page49/">49</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="http://martinliu.cn/page94/">94</a></li>
    

    
    
      <li><a href="http://martinliu.cn/page48/" class="btn">下一页</a></li>
    
  </ul>
</div>



</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Martin Liu.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://martinliu.cn/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://martinliu.cn/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-749876-6', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


          

</body>
</html>