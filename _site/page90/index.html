<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Martin's Blog</title>
<meta name="description" content="DevOps Coach & Cloud Expert">
<meta name="keywords" content="DevOps, Cloud, AWS, HCI, Nutanix, ITSM">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://martinliu.cn/images/path.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="DevOps Coach & Cloud Expert">
<meta name="twitter:creator" content="@zliu">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="DevOps Coach & Cloud Expert">
<meta property="og:url" content="http://martinliu.cn/page90/">
<meta property="og:site_name" content="Martin's Blog">

<meta name="google-site-verification" content="4oSwNTpy1vzip3_lt6XhkhMfImCD_DZlvL3K1k-M8qk">



<link rel="canonical" href="http://martinliu.cn/page90/">
<link href="http://martinliu.cn/feed.xml" type="application/atom+xml" rel="alternate" title="Martin's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://martinliu.cn/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://martinliu.cn/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://martinliu.cn/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://martinliu.cn/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://martinliu.cn/images/apple-touch-icon.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://martinliu.cn/images/apple-touch-icon-72x72.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://martinliu.cn/images/apple-touch-icon-114x114.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://martinliu.cn/images/apple-touch-icon-144x144.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://martinliu.cn/">首页</a></li>
		<li>
			<a href="#">关于</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://martinliu.cn/images/avatar.jpg" alt="Martin Liu photo" class="author-photo">
					<h4>Martin Liu</h4>
					<p>DevOps Coach, Cloud Expert, Runner</p>
				</li>
				<li><a href="http://martinliu.cn/about/"><span class="btn btn-inverse">详情</span></a></li>
				<li>
					<a href="mailto:67120666@qq.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/zliu"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+MartinLiu-cn"><i class="fa fa-fw fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="https://linkedin.com/in/liuzheng"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/martinliu"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">文章</a>
			<ul class="dl-submenu">
				<li><a href="http://martinliu.cn/posts/">所有文章</a></li>
				<li><a href="http://martinliu.cn/tags/">所有分类</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="http://www.aws-faq.com" target="_blank">AWS-FAQ</a></li>
	  
	    
	    <li><a href="http://devopscoach.org" target="_blank">DevOps教练</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="http://martinliu.cn/images/path.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Martin's Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2007-05-30T12:28:00+08:00"><a href="http://martinliu.cn/2007/05/30/hyperic-hq-testing/">May 30, 2007</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2007/05/30/hyperic-hq-testing/" rel="bookmark" title="Hyperic HQ小测手记" itemprop="url">Hyperic HQ小测手记</a></h1>
    
  </header>
  <div class="entry-content">
    <p><a href="http://bp2.blogger.com/_KU0istEHv9w/Rlz-qwD97uI/AAAAAAAAADk/j3tVzwajvC4/s1600-h/logo.JPG"><img src="http://bp2.blogger.com/_KU0istEHv9w/Rlz-qwD97uI/AAAAAAAAADk/j3tVzwajvC4/s320/logo.JPG" alt="" /></a><br />HQ的网站是一个显的非常商业化的网站；看上去制作的比较精良也比较专业。从HQ的官方文档（好像没找到pdf手册）中看出它能监控的东西还真的非常多，无论是商业的软件还是开源的都有一大串的matrix；他们在被监控的及其上是需要安装和运行代理的。所以从这一点上讲和商业软件也没有什么区别，总之看的数据多应该比较好，不过数据收集的多有时候会给监控对象代理太重的workload。<br /><br />如何安装<br />下载HQ\hyperic-hq-installer-3.0.4-389-x86-linux从HQ的网站。这个压缩文件包含：安装程序，服务器端程序（好像包括一个内嵌的PostgreSQL数据库），代理程序，服务期端shell程序，JRE。<br />BTW:服务器端和代理都是Java程序，如果自己配置好JRE的话可以下载不包含JRE的安装包。Windows上的代理包是一个zip文件，为了方便我都下载的含有JRE的安装包。<br /><br />由于是纯Java的应用所以服务器端和代理端看似好像都没有任何依赖性要求，只是需要在服务器端安装xorg-x11-libs包，否则不能正常绘图，看不到图形。<br />在Linux下的安装过程大致如下。<br />mkdir /opt/hq<br />useradd hq -G root -d /opt/hq<br />su hq<br />tar zxvf hq.tgz<br />cd hyperic-hq-installer/<br />./setup.sh<br />/opt/hq/server-3.0.4/bin/hq-server.sh start<br />注意最好建立一个新的用户为HQ，服务期端本身需要被非root用户安装和启动。另外代理和服务器端都需要特殊的两个端口通信，所以安装完之后必须停止或者配置防火墙；否则不能访问服务器，服务器也不能和代理通信。启动代理之前需要配置好防火墙。<br /><br />试用：<br />总体说HQ的安装和配置都是非常简单的，不过他的Web界面更是简洁。当代理启动了之后，会自动出现在Auto-Discovery下面，点击Add Resource按钮将它变成一个正式的监控对象。默认的情况下，代理会收集一定数量的监控指标；大概是可收集数量的20%左右。当在某个监控对象上（例如Memory Used）设置了收集间隔之后，服务器端就开始了定时的数据收集，所收集的数据默认情况下用折线图的形式展示。可以根据某个指标建立一个告警，告警的逻辑也相当的完整：逻辑判断，巅峰判断，升级处理；看似能想到的都有了。由于是第一次使用展示没有看的如何建立一个告警规则应用于所有监控对象的。我用HQ对我的一个服务器（iis,MS Sql,.net）做了监控，从数据收集和展现效果上来说，真的堪称可与商业软件媲美。<br /><br />使用结论：<br />安装简单方便，在Linux下代理端完全无需关照包依赖性。代理配置的安装配置需要一定量的工作，必须配置服务器地址，通信端口等。<br />代理程序对服务器的工作负担还是比较大的，特别是在启动的那几分钟内。代理进程对CPU的使用率可以达到50～80%，之后就比较低了。对内存的利用一般是30MB左右，当然这应该是可以通过降低收集数的数量和频率来降低的。<br />用户界面的使用还真的是很方便，还支持告警信息的RSS访问。总之HQ是一个开源软件中的重量级选手：功能强，复杂性高，代理程序负担较重。其他使用小结，待续。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2007-05-22T22:53:00+08:00"><a href="http://martinliu.cn/2007/05/22/zabbix-key-features/">May 22, 2007</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2007/05/22/zabbix-key-features/" rel="bookmark" title="ZABBIX特点介绍，转自它们的网站" itemprop="url">ZABBIX特点介绍，转自它们的网站</a></h1>
    
  </header>
  <div class="entry-content">
    <p><a href="http://www.zabbix.com/img/screenshots/v1.1/view.screens.2.png"><img src="http://www.zabbix.com/img/screenshots/v1.1/view.screens.2.png" alt="" /></a>FROM：<a href="http://www.zabbix.com/features.php">http://www.zabbix.com/features.php</a><br /><br />ZABBIX offers functionality that will make your IT resources look more transparent, and it will also help to easily identify performance and availability problems. ZABBIX greatly increases the productivity of system administrators by providing simple-to-use monitoring system.<br /><br /><strong>Key features</strong><br /></p>

<p><br />	
  * 开源的方案Open Source solution
<br />	
  * 能编译运行在多种OS：AIX, FreeBSD, HP-UX, Linux, MacOS X, NetBSD, OpenBSD, Solaris, Tru64/OSF
<br />	
  * SQL database存储配置、性能等各种信息
<br />	
  * Web interface 简单易用的访问
<br />	
  * 提供实时和历史的监控分析数据
<br />	
  * Data 可视化和影射
<br />	
  * 高性能的监控代理 (UNIX, Win32)
<br />	
  * 监控 “agentless” 环境
<br />	
  * 维护和监控SLA of IT Services
<br />	
  * 监控 SNMP (v1,v2,v3) devices
<br /><br /><strong>IT Services 提供IT基础架构（组建/服务/硬件）等和业务逻辑的联系和对应</strong><br /><br />ZABBIX’s unique technology allows you to relate your applications and underlying servers or network to a IT Service such as application, location, server, network device, region, etc. This technology allows you to correlate your business to your IT infrastructure and identify the impact of your IT infrastructure to the delivery of business service to your customers.<br /><br /><strong>Data visualisation</strong><br /><br />ZABBIX provides excellent visualisation of statistical and real-time information, ranging from simple graphs to complex views containing graphs, maps and text information. All graphical information is accessible from WEB interface. The wealth of information available such as the trend analysis (days to threshold), the historical graphs and histograms allow you to make informed decisions about the weaknesses and performance of your IT infrastructure.<br /><br /><strong>Application monitoring 应用监控</strong><br /><br />Enterprise applications such as Oracle, WebSphere, WebLogic, Exchange, Apache, etc. can be monitored using SNMP. In many cases, agentless technology can be used, cutting down on the deployment and management costs.<br /><br />ZABBIX agents can be easily extended to perform monitoring of any aspect of your applications. It is matter of writing a shell script which would return required data back to the agent.<br /><br /><strong>Server monitoring 服务器监控</strong><br /><br />Virtually all server platforms are supported including but not limited to UNIX, Win32 and Novell Netware. ZABBIX native agents take care of CPU utilisation, memory utilisation, disk usage, network I/O, temperature of CPUs and mainboards, status of processes, etc. All real-time performance data is immediately available by WEB interface.<br /><br /><strong>Network monitoring 网络设备监控</strong><br /><br />ZABBIX supports monitoring of Cisco, Juniper, 3Com, Nortel, Foundry and other routers as well as firewalls from Netscreen, Fortinet, Cisco or Checkpoint. Any network devices (routers, hubs, printers, etc) having SNMP support can be easily monitored by ZABBIX.<br /><br />ZABBIX makes possible creation of network maps which give very clear representation of monitored network infrastructure. The maps show network devices, connections, statuses of the devices, and reasons if a device is not available or has any problems.<br /><br /><strong>Integration of Fault and Performance Management集成化的故障和性能监控</strong><br /><br />The need to effectively integrate fault and performance management is becoming increasingly apparent to IT organizations seeking to ensure quality delivery of business services. ZABBIX generates real-time notification of threshold violations based on scheduled performance tests.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2007-05-22T21:51:00+08:00"><a href="http://martinliu.cn/2007/05/22/what-is-zabbix/">May 22, 2007</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2007/05/22/what-is-zabbix/" rel="bookmark" title="What is ZABBIX?" itemprop="url">What is ZABBIX?</a></h1>
    
  </header>
  <div class="entry-content">
    <p><a href="http://www.zabbix.com/img/zabbix1.png"><img src="http://www.zabbix.com/img/zabbix1.png" alt="" /></a><br />第一次看到这个软件是在OpenNMS的邮件讨论组中，他们计划做一个vmware的image放到<a href="http://www.vmware.com/vmtn/appliances/index.html">VMTN上</a> 。我在VMTN里哪里点击了一下监控管理这一类，一个叫<a href="http://www.vmware.com/vmtn/appliances/directory/124">OpenESM的项目</a>进入了我的视线。它能引起我的注意是因为，它在项目的描述中说:我们理解ITSM、、、、<a href="http://www.openesm.com/s1/">Check it out</a>! 大致浏览了一下他们的网站，发现他们的目的是在Zabbix的基础上作一下优化和开发，加入若干特色：GSM modem发短信、新报表、SLA监控等。<br /><br />现在很多项目都有迅速实施的解决方案。对于很多开源项目来说，它们对于新手的相同门槛就是安装。安装上了，不会配置；配置好了，不会用；用上了解决不了问题。<br /><br />我先下载了<a href="http://www.vmware.com/vmtn/appliances/directory/124">OpenESM</a> ，一个不算太大的文件1.3GB。解压缩之后用VMWare打开运行，猜出root的用户名是openesm，登陆之后发现它是一个Fedora的虚拟机。登陆OpenESM的控制台， http://ip/ 接下来就需要去www.openesm.com上下载手册了，否则无法继续下去。照着手册安装代理，在我的两个Windows的机器上。安装需要先下子代理安装包，允许安装命令的时候需要制定自己的主机名和服务器的主机名。在控制台中加入这两个安装了代理的机器，由于是初次使用没用玩自动发现之类的功能。收集了一阵子数据之后，很快发现了很多有趣的数据。<br /><br />最终总结如下<br /></p>

<p><br />	
  * 这是我安装的第一个有代理程序的开源监控软件，感觉在Windows下代理的安装还是比较方便的。比我想象的简单，安装文件只有一个exe文件，装完之后形成一个服务。我记得在查阅文档的时候看到了一文档，上面列出了所有代理程序能收集的数据的表格，说明了什么数据在什么操作系统中支持，那些不支持。它能在多种操作系统上安装，他的安装时说从代码编译安装，windows上不需要，在非windows上就以为这需要安装编译器什么的。这好像并不是特别好。
<br />	
  * 可用性和性能的数据都能收集。
<br />	
  * 事件管理功能，能触发action，还没有试过，能触发邮件和GSM短信等。没有试过。
<br />	
  * 没有试的还挺多，还需要进一步研究。
<br /></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2007-05-13T19:40:00+08:00"><a href="http://martinliu.cn/2007/05/13/install-opennms-132-on-opensuse-102-system-the-simplest-version/">May 13, 2007</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2007/05/13/install-opennms-132-on-opensuse-102-system-the-simplest-version/" rel="bookmark" title="Install OpenNMS 1.3.2 on OpenSuse 10.2 system (The simplest version  )" itemprop="url">Install OpenNMS 1.3.2 on OpenSuse 10.2 system (The simplest version  )</a></h1>
    
  </header>
  <div class="entry-content">
    <table>
  <tbody>
    <tr>
      <td>1&gt;Install dependence packages<br />zliu3:~yast -i rrdtool<br />zliu3:~yast -i postgresql<br />zliu3:~ # rpm -qa</td>
      <td>grep rrdtool<br />rrdtool-1.2.15-25<br />zliu3:~ # rpm -qa</td>
      <td>grep postgresql<br />postgresql-8.1.5-13<br />postgresql-libs-8.1.5-13<br />postgresql-contrib-8.1.5-13<br />postgresql-pl-8.1.5-15<br />postgresql-server-8.1.5-13<br />rcpostgresql start<br />copy jdk/tomcat 5.5 package files to /opt<br />cd /opt<br />tar xzvf jdk1.5.tar.gz<br />tar xzvf tomcat5.5.tar.gz<br />export  JAVA_HOME=/opt/jdk1.5.0_09<br />export OPENNMS_HOME=/opt/opennms<br />export  CATALINA_HOME=/opt/apache-tomcat-5.5.20<br />export PATH=$PATH:$JAVA_HOME/bin<br />java -version<br />$CATALINA_HOME/bin/startup.sh<br />Test Tomcat 5.5 http://Ip_address:8080/<br />vi /var/lib/pgsql/data/postgresql.conf<br /># - Connection Settings - <br />max_connections = 256<br /><br />vi /var/lib/pgsql/data/pg_hba.conf<br />[refer to install guide] <br />#local  all    all             ident   sameuser<br />local all all trust<br />host all all 127.0.0.1 255.255.255.255 trust<br />host all all ::1 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff trust<br /><br />rcpostgresql restart<br /><br />2&gt;Install and configure OpenNMS<br />Copy OpenNMS rpm packages to /root<br />rpm -ivh opennms*<br />$OPENNMS_HOME/bin/runjava -s<br />$OPENNMS_HOME/bin/install -dis<br />$OPENNMS_HOME/bin/install -y -w $CATALINA_HOME/conf/Catalina/localhost<br />$CATALINA_HOME/bin/shutdown.sh<br />$CATALINA_HOME/bin/startup.sh<br />/etc/init.d/opennms start<br />/etc/init.d/opennms -v status<br />OpenNMS.Eventd         : running<br />OpenNMS.Trapd          : running<br />OpenNMS.Dhcpd          : running<br />OpenNMS.Actiond        : running<br />OpenNMS.Capsd          : running<br />OpenNMS.Notifd         : running<br />OpenNMS.Scriptd        : running<br />OpenNMS.Rtcd           : running<br />OpenNMS.Pollerd        : running<br />OpenNMS.PollerBackEnd  : running<br />OpenNMS.Collectd       : running<br />OpenNMS.Threshd        : running<br />OpenNMS.Discovery      : running<br />OpenNMS.Vacuumd        : running<br />OpenNMS.EventTranslator: running<br />OpenNMS.PassiveStatusd : running<br /><br />Test OpenNMS login page http://ip_address:8080/opennms</td>
    </tr>
  </tbody>
</table>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2007-05-08T12:41:00+08:00"><a href="http://martinliu.cn/2007/05/08/what-is-opennms/">May 08, 2007</a></time></span><span class="author vcard"><span class="fn"><a href="http://martinliu.cn/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://martinliu.cn/2007/05/08/what-is-opennms/" rel="bookmark" title="OpenNMS网络和系统管理简介" itemprop="url">OpenNMS网络和系统管理简介</a></h1>
    
  </header>
  <div class="entry-content">
    <h2 id="section">1.1  概述</h2>

<p><br /></p>

<p>Opennms能够帮助IT管理部门持续的监控分布式的异构系统和网络设备的运行状态，它可以支持SNMP网络管理协议确保管理的扩展性，并且提供非常灵活的定制功能从而有利于管理范围的伸缩。它内置的故障事件管理以提供故障事件的记录和分析的能力，快速隔离非根源事件并迅速发现故障原因。Opennms良好的设计可以快速部署实施，简单友好的图形界面能够使得用户迅速掌握，从而降低操作的复杂度，提高IT管理效率。</p>

<p><br /><br /></p>

<h2 id="section-1">1.2  体系架构</h2>

<p><br /></p>

<p>作为一个通用的网络系统故障监控平台，其体系架构应如下图所示：</p>

<p><br /></p>

<p> <img src="http://blog.chinaunix.net/u/2632/photo/060204205615.jpg" alt="" /></p>

<p><br /></p>

<p><br /></p>

<p><strong>附图1. **     **Opennms</strong><strong>体系架构</strong></p>

<p><br /></p>

<p>我们从下至上对Opnnms体系架构作一一的介绍：</p>

<p><br /></p>

<p>u      被管理对象层，SNMP代理程序是数据采集和动作执行层。对应网络设备来讲，该层对应与网络设备本身的网络管理功能，不需要在设备上单独部署功能模块；对计算机来讲，该层是运行在目标计算机上的SNMP服务，负责采集该系统运行状况、性能等数据，并向管理层汇报。</p>

<p><br /></p>

<p>u      Opennms监控引擎是实现网络和系统可用性、故障管理的业务逻辑和策略的处理层。他利用特定的轮询策略：从代理程序层收集数据、更新和维护被管理对象状态、执行相关的报警事件通知。</p>

<p><br /></p>

<p>u      管理对象数据库是网络和系统管理的数据存储层。其中以面向对象的方式保存着网络和系统资源的模型，记录着他们的配置、描述和状态等信息。这些模型和信息是通过Opennms网络扫描模块自动建立起来的，并由管理者层自动维护。</p>

<p><br /></p>

<p>u      图形用户界面是网络和系统管理的数据表示层。他以各种直观、生动的用户界面向用户展示网络和系统中各种对象的关系、配置、状态和故障情况，是优秀的用户接口。</p>

<p><br /></p>

<p><br /></p>

<p>针对某企业简称user short name的环境，其IT故障监控子系统的管理框架为：</p>

<p><br /></p>

<p>u      被管理对象层——启动核心路由器和交换机的SNMP网管协议，作为网络设备故障的数据提供源；在所有需要管理的服务器上运行SNMP服务，作为监控操作系统故障的数据提供源。</p>

<p><br /></p>

<p>u      Opennms网络监控服务器——新增一台服务器，部署Opennms的监控引擎模块，由该模块对被管理对象层的数据源进行自动的数据采集和翻译采集的结果。并实时发送报警信息。</p>

<p><br /></p>

<p>u      对象存储库——在和Opennms监控引擎安装的机器上安装PostgreSQL，作为Opennms监控模块的对象存储库。</p>

<p><br /></p>

<p>u      图形用户界面——某企业简称user short name管理员可使用任何的WWW浏览器连接Opennms网络监控服务器的用户界面，使用合适的用户名，在某种适当的权限下查看和浏览网络监控信息、状态信息、可用性报表和性能报表。</p>

<p><br /><br /></p>

<h2 id="section-2">1.3  功能介绍</h2>

<p><br /></p>

<h3 id="section-3">1.3.1  网络节点自动发现</h3>

<p><br /></p>

<p>对象存储库中的信息并不是靠管理员手工输入和维护的，而是由Opennms网络监控引擎－自动扫描模块自动从用户的计算机系统中搜索发现出来的。</p>

<p><br /></p>

<p><br /></p>

<p><strong>附图2. **     **网络节点自动发现</strong></p>

<p><br /><br /></p>

<h3 id="section-4">1.3.2  图形用户管理界面</h3>

<p><br /></p>

<p>在某企业简称user short name这 样的网络和系统中，需要一些友好的监控视图。目的是使得管理员能够通过直观的界面，迅速发现故障，从而在最短的时间内解决故障。该用户界面视图可使得管理 员通过管理工具看到现实世界对象的真实反映，而不是抽象的符号。使用户能够监控整个系统的概貌，系统的大体分布和总体运行状况等。并且决策适当的故障排除 方案，各种界面视图可通过Intranet进行浏览查看。</p>

<p><br /></p>

<p><br /></p>

<p><strong>附图3. **     **网络管理员管理主页</strong></p>

<p><br /></p>

<p>该用户界面的最左边是：Nodes with Outages，表格中列出了最近发生故障状况的12个节点，这些节点可能是网络故障，或者是某些网络服务出错等。</p>

<p><br /></p>

<p>用户界面的中间是：各种网络服务的服务水平报告。它列出了最近24小时之内各种网络服务的服务质量水平；其中的网络服务可能包括：网络接口的UP时间、Web服务、DNS和DHCP服务和数据库服务等。</p>

<p><br /></p>

<p>最右侧的是一些比较常用的功能选项：报警提示信息、节点的性能报表、节点网络服务相应时间报表和自定义的性能报表。</p>

<p><br /><br /></p>

<h3 id="section-5">1.3.3  故障监控</h3>

<p><br /></p>

<p>被管理对象的数据采集和状态维护是由Opennms的监控引擎模块实现的。每个所管理的所有对象存储在数据库中。可以管理的对象包括：</p>

<p><br /></p>

<p>u      支持SNMP网管的网络设备</p>

<p><br /></p>

<p>u      部署了SNMP服务的服务器上的操作系统</p>

<p><br /></p>

<p>Opennms采取统一的通讯方式从这些管理对象上采集可用性和故障信息，信息的采集有两种方式：</p>

<p><br /></p>

<p>u      Opennms主动地通过SNMP协议定期查询被管理对象状态</p>

<p><br /></p>

<p>u      Opennms被动接收被管理对象发来的SNMP Trap</p>

<p><br /></p>

<p><br /></p>

<p>Opennms得到被管理对象的轮询或Trap信息后，根据收到的信息类型、对象原来的状态和网络系统管理的策略和逻辑判断对象的状态是否发生变化。如果发生了变化，则可以按照管理策略采取若干更新操作。</p>

<p><br /><br /></p>

<h3 id="section-6">1.3.4  故障事件管理</h3>

<p><br /></p>

<p>当 被管理对象的运行状态发生变化时，就会产生事件。如果该事件是由正常变为故障，则会产生故障报警。事件管理是通过收集、确认事件，对事件进行分类和过滤， 关联不同来源的事件完成对事件的处理和响应。通过事件管理，系统管理人员可以方便、迅速、及时掌握系统运行的故障和警报，及时进行处理，保障系统的正常、 稳定运行。</p>

<p><br /></p>

<p>IT系统管理人员所关注的问题，如系统资源出现短缺、数据库连接失败、网络通信中断、主机文件系统溢出等等都会以事件的形式表现出来。</p>

<p><br /></p>

<p><br /></p>

<p><strong>附图4. **     **事件管理控制台</strong></p>

<p><br /></p>

<p><br /><br /></p>

<h3 id="section-7">1.3.5  操作系统监控</h3>

<p><br /></p>

<p>Opennms对各种计算机操作系统的可用性、运行状况和故障的集中监控是通过本身的SNMP服务程序完成的。这些SNMP代理程序是SNMP服务的组成部分。在本次建议的方案中，在所有的被监控服务器上其监控的主要内容包括：</p>

<p><br /></p>

<p>u      CPU利用率，显示系统、用户、空闲时间的百分比；</p>

<p><br /></p>

<p>u      虚拟内存(Virtual memory)利用率；</p>

<p><br /></p>

<p>u      文件系统使用情况，显示磁盘空间使用情况；</p>

<p><br /></p>

<p>u      监视文件系统的使用率，当使用率超过特定阈值时向系统管理员报警；</p>

<p><br /></p>

<p>u      监控网络端口的输入、输出、错包，以及端口是否被停用或者删除；</p>

<p><br /></p>

<p>u      UNIX系统还可以监控</p>

<p><br /></p>

<p>²       Load Average：服务器平均处理量</p>

<p><br /></p>

<p>²       共享内存</p>

<p><br /><br /></p>

<h3 id="section-8">1.3.6  网络节点配置信息管理</h3>

<p><br /></p>

<p>被监控对象节点在数据中的配置信息是IT设备的资产信息，每个网络节点都是一个特定的IT资产设备。每个节点在数据库中有很多属性字段供选择填写，主要有三类属性信息：</p>

<p><br /></p>

<ol>
  <li>配置种类信息：配置分类、告警分类、轮询属性和阈值分类。</li>
</ol>

<p><br /></p>

<ol>
  <li>标识信息：资产描述、厂商、型号、资产编号、操作系统等</li>
</ol>

<p><br /></p>

<ol>
  <li>位置信息：负责人、部门、楼层、房间、机架编号等</li>
</ol>

<p><br /></p>

<p><br /></p>

<p><strong>附图5. **     **节点资产信息</strong></p>

<p><br /></p>

<p><br /><br /></p>

<h3 id="section-9">1.3.7  全面的节点监控</h3>

<p><br /></p>

<p>每个被监控的节点都能被细致的记录和监控。当查看某节点的信息时，有这样几类信息：状态信息、各种网络服务总的可用性、SNMP属性、各个接口熟悉、最近发生的5个事件和最近的故障事件。</p>

<p><br /></p>

<p><br /></p>

<p><strong>附图6. **     **节点监控视图</strong></p>

<p><br /></p>

<p>在查看某个节点是，界面上的信息分为三类：网络服务可用性报表、当前状态和监控事件信息。在菜单栏还能有很多功能选项：查看故障事件、资产信息、响应时间报表、SNMP性能报表、重新扫描、节点管理和更新SNMP信息。</p>

<p><br /></p>

<p><br /><br /></p>

<h2 id="section-10">1.4  特点和优势</h2>

<p><br /></p>

<p>Opennms在网络和系统管理方面，有非常广泛的用户，特别是中小企业用户，Opennms具有很多极好的特点：</p>

<p><br /></p>

<p>u      方便易用的用户管理界面——Opennms可以提供故障事件视图、节点视图、相应时间视图、性能视图等各种管理视图。</p>

<p><br /></p>

<p>u      基于Open Source协议开发——用户可以按照自己的需求，通过修改软件本身或者软件的源代码来定制。</p>

<p><br /></p>

<p>u      跨平台管理——Opennms支持任何能运行标准SNMP协议服务的操作系统系统，并且可以从一个单一的用户界面分别管理其局域网（LAN）。</p>

<p><br /></p>

<p>u      切实可行的事件管理系统——Opennms通过方便易用的交互式控制台，为IT管理员显示关键事件，提供自动的事件响应，可以以电子邮件方式发出事件通知。</p>

<p><br /></p>

<p>u      方便的集成——Opennms可以与第三方产品集成。例如Opennms可以方便的与Dell、HP、IBM等厂商的服务器自带的SNMP故障管理软件集成。</p>

<p><br /></p>

<p>u      2005 Linux World推荐管理产品 ——Opennms获得2005年Linux世界大会的“最佳网络系统管理软件”的荣誉。已经被认定开源软件世界中的最佳网络系统管理软件。</p>

<p><br /></p>

<p><br /></p>

<p>版权所有，如果转载请著名出处。</p>

<p><br /></p>

<p>曾被<a href="http://www.vshj.com/">www.vshj.com</a>转载：<a href="http://www.vshj.com/Article/2006/200607/Article_97842.htm">http://www.vshj.com/Article/2006/200607/Article_97842.htm</a></p>

<p><br /></p>

<p><br /><br /></p>

<p><a href="http://picasaweb.google.com/liuzh66/OpenNMS">文章中所提到的图片请参阅我的相册。  </a><br /><br /></p>

<p><br /><br /></p>

<p><br /><br /></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="http://martinliu.cn/page89/" class="btn">向前</a></li>
      
    

    
    
      <li><a href="http://martinliu.cn">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="http://martinliu.cn/page88/">88</a></li>
      
    
      
        
        
        
        <li><a href="http://martinliu.cn/page89/">89</a></li>
      
    
      
        <li><strong class="current-page">90</strong></li>
      
    
      
        
        
        
        <li><a href="http://martinliu.cn/page91/">91</a></li>
      
    
      
        
        
        
        <li><a href="http://martinliu.cn/page92/">92</a></li>
      
    
      
        
        
        
        <li><a href="http://martinliu.cn/page93/">93</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="http://martinliu.cn/page94/">94</a></li>
    

    
    
      <li><a href="http://martinliu.cn/page91/" class="btn">下一页</a></li>
    
  </ul>
</div>



</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Martin Liu.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://martinliu.cn/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://martinliu.cn/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-749876-6', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


          

</body>
</html>