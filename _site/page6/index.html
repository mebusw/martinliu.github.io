<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Martin's Blog</title>
<meta name="description" content="DevOps Coach & Cloud Expert">
<meta name="keywords" content="DevOps, Cloud, AWS, HCI, Nutanix, ITSM">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/path.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="DevOps Coach & Cloud Expert">
<meta name="twitter:creator" content="@zliu">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="DevOps Coach & Cloud Expert">
<meta property="og:url" content="/page6/">
<meta property="og:site_name" content="Martin's Blog">





<link rel="canonical" href="/page6/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Martin's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">首页</a></li>
		<li>
			<a href="#">关于</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Martin Liu photo" class="author-photo">
					<h4>Martin Liu</h4>
					<p>DevOps Coach, Cloud Expert, Runner</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">详情</span></a></li>
				<li>
					<a href="mailto:67120666@qq.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/zliu"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+MartinLiu-cn"><i class="fa fa-fw fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="https://linkedin.com/in/liuzheng"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/martinliu"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">文章</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">所有文章</a></li>
				<li><a href="/tags/">所有分类</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="http://www.aws-faq.com" target="_blank">AWS-FAQ</a></li>
	  
	    
	    <li><a href="http://devopscoach.org" target="_blank">DevOps教练</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="/images/path.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Martin's Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-07-14T22:20:24+08:00"><a href="/2015/07/14/e7-ba-a2-e5-b8-bd-e5-aa-92-e4-bd-93-e6-97-a5/">July 14, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2015/07/14/e7-ba-a2-e5-b8-bd-e5-aa-92-e4-bd-93-e6-97-a5/" rel="bookmark" title="红帽媒体日" itemprop="url">红帽媒体日</a></h1>
    
  </header>
  <div class="entry-content">
    <p>本次演讲用了大约25分钟，超时了大约5分钟多，但是其中有些观点还是没有叙述的很倒位。只能算是我的一种理解和解读，希望对道场的媒体朋友们对认识红帽公司有帮助。</p>

<p>演讲源版slide和录音在这个网页上： <a href="http://investors.redhat.com/events.cfm">http://investors.redhat.com/events.cfm</a> 的这部分：</p>
<table cellpadding="0" class="wsh-dataTable wsh-events" summary="">
<tbody>
<tr>

<td data-before="Date">


Jun 24, 2015




10:30 AM - 1:00 PM ET

</td>

<td data-before="Details">


Red Hat Analyst Day




[ Listen to webcast ](http://edge.media-server.com/m/p/mhayc7rh)






[View Presentation](http://investors.redhat.com/common/download/download.cfm?companyid=RHAT&amp;fileid=838366&amp;filekey=633328A1-EAD6-471D-9934-C43F4CDC5666&amp;filename=RH_Summit_Analyst_Day_FINAL.pdf)


12.2 MB




[Add to Briefcase](http://investors.redhat.com/events.cfm#)







View Additional Information

</td>
</tr>
</tbody>
</table>
<p>我做了Pual这一段的翻译，翻译的文档下载点这里：<a href="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/RH_Summit_Analyst_Day_Master_20150714_MartinLiu.pdf">RH_Summit_Analyst_Day_Master_20150714_MartinLiu</a></p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-07-12T19:16:44+08:00"><a href="/2015/07/12/ovirt-e6-9c-8d-e5-8a-a1-e5-99-a8-e8-99-9a-e6-8b-9f-e5-8c-96-e6-b5-8b-e8-af-95/">July 12, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2015/07/12/ovirt-e6-9c-8d-e5-8a-a1-e5-99-a8-e8-99-9a-e6-8b-9f-e5-8c-96-e6-b5-8b-e8-af-95/" rel="bookmark" title="Ovirt 服务器虚拟化测试" itemprop="url">Ovirt 服务器虚拟化测试</a></h1>
    
  </header>
  <div class="entry-content">
    <p>本文安装和测试的软件是Ovirt+KVM的服务器虚拟化，这两个项目是红帽RHEVM+KVM服务器虚拟化的上游社区产品。可以通过这个文档清晰的了解到红帽服务器虚拟化产品的大体功能，基本特点。本测试文档使用的是Centos7+社区yum 源；因此是最新的ovirt和kvm的功能。如果是正式的企业级需求测试，请使用光纤或者传统存储，从而达到和vmware等商业产品最好的类比测试。尽量避免使用嵌套kvm虚拟化的方式，除非您很熟悉Linux，使用两个笔记本是最简单的测试环境。</p>

<p>下图是Ovirt服务器的详细架构图。其中的ovirt-engine是本文安装和部署的部分，是用一个centos7的虚拟机安装的。Host1也是用一个centos7的虚拟机安装的。半年之前我也配置过一次嵌套kvm，根本是一头雾水，而且还没有成功，不过这次的配置过程却这么简单容易，就正常工作了。希望简单一点的人，可以把Host1用物理机来安装，也会节省很多时间。</p>

<p>[caption id=”attachment_53901” align=”alignnone” width=”512”]<img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/ovirt-512px-Architecture.png" alt="ovirt 架构图" /> ovirt 架构图[/caption]</p>

<h2 id="kvm">KVM嵌套虚拟化准备</h2>

<p>在测试KVM服务器虚拟化的过程中，如果您能有独立的物理机跑Hypervisor，那么您可以忽略本节。至今进入ovirt的安装。 下面的测试的物理机是 Lenovo T440s 笔记本，运行的 Fedora 22 操作系统，使用 KVM manager 做虚拟机的管理工具。本次测试用到两个虚拟机：</p>

<ol>
  <li>
    <p>ovirt: 运行服务器虚拟化的管理机ovirt，这个程序类似于vmware 的 vcenter。</p>
  </li>
  <li>
    <p>ovirt-host : 用来被ovirt管理的hypervisor；使用 kvm 嵌套 kvm 的方式，来跑虚拟机。</p>
  </li>
</ol>

<p>确认本机的服务器虚拟机CPU Bios配置正常。</p>

<p>[bash]</p>

<p>egrep -c ‘(vmx|svm)’ /proc/cpuinfo
4</p>

<p>[/bash]</p>

<p>本机是i5的CPU，双核开启超线程，显示为4。还没有启用嵌套KVM的虚拟机，需要新建下面这个配置文件，操作系统不同，可能稍微不同，下面是以 Fedora 22 为例。</p>

<p>vi /etc/modprobe.d/kvm-nested.conf
编辑以上文件，增加下面这行参数即可
options kvm_intel nested=1</p>

<p>运行下面的命令，为操作系统内核加載此功能。</p>

<p>[bash]</p>

<p>modprobe -r kvm_intel # unload
modprobe kvm_intel # reload again</p>

<p>cat /sys/module/kvm_intel/parameters/nested
Y</p>

<p>[/bash]</p>

<p>用上面最后的cat的命令确认嵌套功能启用正常，看到的是Y即可。</p>

<p>查看本机虚拟化的Cpu相关参数。</p>

<p>[bash]</p>

<p>[root@martin-fedora vm]# virsh capabilities | egrep “/model|/vendor”</p>
<model>Westmere</model>
<vendor>Intel</vendor>
<model>none</model>
<model>dac</model>
<p>[root@martin-fedora vm]#</p>

<p>[/bash]</p>

<p>到此，物理机的相关准备工作完成。下面使用 Martin’s Perfect CentOS7 模板新建一个2C/4Gd的虚拟机 ovirt-host; 用这个虚拟机作为跑虚拟机的hypervisor把建立好的虚拟机先别开机，需要对它的配置做修改。编辑 ovirt-host虚拟机的配置，给这个嵌套的KVM hypervisor 增加和物理机相同的cpu属性。</p>

<p>virsh edit ovirt-host</p>

<p>本嵌套kvm的虚拟机 cpu 参数如下，如果测试的物理机使用非 i5 的 CPU， 实际的配置参数应该和下面不同。</p>

<cpu mode="custom" match="exact">
<model fallback="allow">Westmere</model>
<vendor>Intel</vendor>
<feature policy="require" name="vmx" />
</cpu>

<p>保存配置，启动这个虚拟机，配置好主机名和网络ip地址。安装ovirt yum 源。做 yum update 之后，reboot待用。</p>

<p>[bash]
yum -y update
yum install http://plain.resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm</p>

<p>[/bash]</p>

<h2 id="ovirt-">安装ovirt 服务器虚拟化管理机</h2>

<p>使用 Martin’s Perfect CentOS7 模板新建一个1C/4G 的虚拟机 ovirt；这个虚拟机上还需要配置 NFS 服务器，用来做 跑虚拟机的共享存储和用于存储iso光盘的存储。</p>

<p>安装和配置NFS的过程如下：</p>

<h1 id="nfs-">安装 nfs 服务相关的包</h1>
<p>yum install -y nfs-utils</p>

<h1 id="section">创建存储目录</h1>
<p>mkdir -p /srv/ovirt/{iso,export,sata}
chown -R vdsm:kvm /srv/ovirt/
chmod -R 770 /srv/ovirt/</p>

<p>编辑nfs配置文件 /ect/exports ， 加入下面三行。</p>

<p>/srv/ovirt/iso 192.168.10.0/24(rw,anonuid=36,anongid=36,all_squash)
/srv/ovirt/export 192.168.10.0/24(rw,anonuid=36,anongid=36,all_squash)
/srv/ovirt/sata 192.168.10.0/24(rw,anonuid=36,anongid=36,all_squash)</p>

<p>由于centos 7 的nfs默认是v4，这和ovirt不兼容，需要修改配置文件改为 v3， 编辑 /etc/nfsmount.conf 加入下面两个参数。</p>

<p>Defaultvers=3
Nfsvers=3</p>

<p>#重启动 nfs 服务器 ，设置开机启动服务
systemctl start rpcbind.service &amp;&amp; systemctl enable rpcbind.service
systemctl start nfs-server.service &amp;&amp; systemctl enable nfs-server.service</p>

<p>下面开始安装ovirt服务器。</p>

<p>yum -y update
yum install http://plain.resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm
yum -y install ovirt-engine</p>

<p>安装完后，用 engine-setup 命令配置和部署ovirt 服务器。</p>

<p>[bash]</p>

<p>[root@ovirt ~]# engine-setup
[ INFO ] Stage: Initializing
[ INFO ] Stage: Environment setup
Configuration files: [‘/etc/ovirt-engine-setup.conf.d/10-packaging-jboss.conf’, ‘/etc/ovirt-engine-setup.conf.d/10-packaging.conf’]
Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20150711225251-f9k7an.log
Version: otopi-1.3.2 (otopi-1.3.2-1.el7.centos)
[ INFO ] Stage: Environment packages setup
[ INFO ] Yum Downloading: ovirt-3.5-patternfly1-noarch-epel/x86_64 (0%)
[ INFO ] Stage: Programs detection
[ INFO ] Stage: Environment setup
[ INFO ] Stage: Environment customization</p>

<p>–== PRODUCT OPTIONS ==–</p>

<p>Configure Engine on this host (Yes, No) [Yes]: #回车，选择Yes
Configure WebSocket Proxy on this host (Yes, No) [Yes]: #回车，选择Yes</p>

<p>–== PACKAGES ==–</p>

<p>[ INFO ] Checking for product updates…
[ INFO ] No product updates found</p>

<p>–== ALL IN ONE CONFIGURATION ==–</p>

<p>–== NETWORK CONFIGURATION ==–</p>

<p>Setup can automatically configure the firewall on this system.
Note: automatic configuration of the firewall may overwrite current settings.
Do you want Setup to configure the firewall? (Yes, No) [Yes]: No #选择no，由于本机的服务没有安装防火墙
Host fully qualified DNS name of this server [unknown.prolexic.com]: ovirt.xenlab.com #回车继续</p>

<p>–== DATABASE CONFIGURATION ==–</p>

<p>Where is the Engine database located? (Local, Remote) [Local]: #回车，选择 Local 继续
Setup can configure the local postgresql server automatically for the engine to run. This may conflict with existing applications.
Would you like Setup to automatically configure postgresql and create Engine database, or prefer to perform that manually? (Automatic, Manual) [Automatic]: #回车，选择 继续</p>

<p>–== OVIRT ENGINE CONFIGURATION ==–</p>

<p>Engine admin password:
Confirm engine admin password:
[WARNING] Password is weak: it is based on a dictionary word
Use weak password? (Yes, No) [No]: yes
Application mode (Virt, Gluster, Both) [Both]: #回车，选择 Both 继续</p>

<p>–== PKI CONFIGURATION ==–</p>

<p>Organization name for certificate [xenlab.com]:</p>

<p>–== APACHE CONFIGURATION ==–</p>

<p>Setup can configure the default page of the web server to present the application home page. This may conflict with existing applications.
Do you wish to set the application as the default page of the web server? (Yes, No) [Yes]:
Setup can configure apache to use SSL using a certificate issued from the internal CA.
Do you wish Setup to configure that, or prefer to perform that manually? (Automatic, Manual) [Automatic]:</p>

<p>–== SYSTEM CONFIGURATION ==–</p>

<p>Configure an NFS share on this server to be used as an ISO Domain? (Yes, No) [Yes]: no # 选择 no，本测试手工配置NFS，不需要安装程序配置。 继续</p>

<p>–== MISC CONFIGURATION ==–</p>

<p>–== END OF CONFIGURATION ==–</p>

<p>[ INFO ] Stage: Setup validation
[WARNING] Cannot validate host name settings, reason: resolved host does not match any of the local addresses
[WARNING] Less than 16384MB of memory is available</p>

<p>–== CONFIGURATION PREVIEW ==–</p>

<p>Application mode : both
Update Firewall : False
Host FQDN : ovirt.xenlab.com
Engine database name : engine
Engine database secured connection : False
Engine database host : localhost
Engine database user name : engine
Engine database host name validation : False
Engine database port : 5432
Engine installation : True
PKI organization : xenlab.com
Configure local Engine database : True
Set application as default page : True
Configure Apache SSL : True
Configure WebSocket Proxy : True
Engine Host FQDN : ovirt.xenlab.com</p>

<p>Please confirm installation settings (OK, Cancel) [OK]: #回车，选择 OK 继续
[ INFO ] Stage: Transaction setup
[ INFO ] Stopping engine service
[ INFO ] Stopping ovirt-fence-kdump-listener service
[ INFO ] Stopping websocket-proxy service
[ INFO ] Stage: Misc configuration
[ INFO ] Stage: Package installation
[ INFO ] Stage: Misc configuration
[ INFO ] Initializing PostgreSQL
[ INFO ] Creating PostgreSQL ‘engine’ database
[ INFO ] Configuring PostgreSQL
[ INFO ] Creating/refreshing Engine database schema
[ INFO ] Creating CA
[ INFO ] Configuring WebSocket Proxy
[ INFO ] Generating post install configuration file ‘/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf’
[ INFO ] Stage: Transaction commit
[ INFO ] Stage: Closing up</p>

<p>–== SUMMARY ==–</p>

<p>[WARNING] Less than 16384MB of memory is available
SSH fingerprint: DF:FF:42:14:80:35:E2:7D:68:3A:1F:83:65:6E:89:EA
Internal CA 99:17:7A:42:D0:9D:D7:33:DE:C3:3E:07:EE:15:5D:01:28:63:4A:BF
Web access is enabled at:
http://ovirt.xenlab.com:80/ovirt-engine
https://ovirt.xenlab.com:443/ovirt-engine
Please use the user “admin” and password specified in order to login
In order to configure firewalld, copy the files from
/etc/ovirt-engine/firewalld to /etc/firewalld/services
and execute the following commands:
firewall-cmd -service ovirt-postgres
firewall-cmd -service ovirt-https
firewall-cmd -service ovirt-fence-kdump-listener
firewall-cmd -service ovirt-websocket-proxy
firewall-cmd -service ovirt-http
The following network ports should be opened:
tcp:443
tcp:5432
tcp:6100
tcp:80
udp:7410
An example of the required configuration for iptables can be found at:
/etc/ovirt-engine/iptables.example</p>

<p>–== END OF SUMMARY ==–</p>

<p>[ INFO ] Starting engine service
[ INFO ] Restarting httpd
[ INFO ] Stage: Clean up
Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20150711225251-f9k7an.log
[ INFO ] Generating answer file ‘/var/lib/ovirt-engine/setup/answers/20150711225734-setup.conf’
[ INFO ] Stage: Pre-termination
[ INFO ] Stage: Termination
[ INFO ] Execution of setup completed successfully</p>

<p>[/bash]</p>

<p>安装成功，用浏览器，访问ovirt 服务器IP地址使用 admin / 密码 登陆管理员控制台，第一次比较慢，验证安装是否完全成功。</p>

<p>使用命令确认nfs
[root@ovirt ~]# showmount -e
Export list for ovirt.xenlab.com:
/srv/ovirt/sata 192.168.10.0/24
/srv/ovirt/export 192.168.10.0/24
/srv/ovirt/iso 192.168.10.0/24</p>

<p>在ovirt服务器中添加这三个存储，然后在命令和中确认iso存储已经可用。</p>

<p>[bash]</p>

<p>[root@ovirt ~]# engine-iso-uploader list
Please provide the REST API password for the admin@internal oVirt Engine user (CTRL+D to abort):
ISO Storage Domain Name | Datacenter | ISO Domain Status
ovirt-iso | Default | active</p>

<p>[/bash]</p>

<p>把需要安装的光盘镜像文件，先复制到ovirt服务器上，然后传入iso存储。</p>

<p>[bash]</p>

<p>[martin@martin-fedora iso]$ scp CentOS-7-x86_64-Minimal-1503-01.iso root@192.168.10.25:/root/
The authenticity of host ‘192.168.10.25 (192.168.10.25)’ can’t be established.
ECDSA key fingerprint is SHA256:KMGYLWZu14ZKaUwizIORgQ598Bpc0PKzNWF0qop2VAQ.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added ‘192.168.10.25’ (ECDSA) to the list of known hosts.
root@192.168.10.25’s password:
CentOS-7-x86_64-Minimal-1503-01.iso 100% 636MB 90.9MB/s 00:07
[martin@martin-fedora iso]$</p>

<p>[/bash]</p>

<p>用这个命令上传光盘。
engine-iso-uploader upload -i ovirt-iso /root/CentOS-7-x86_64-Minimal-1503-01.iso</p>

<p>之后就可以在控制台中创建虚拟机了。在Web界面上安装虚拟机，是需要安装客户的程序的，在 Fedora 22 笔记本中安装它们。
yum install spice-xpi virt-viewer</p>

<p>点击新创建的虚拟机，启动之后，选择控制台，打开后，开始系统安装。</p>

<h2 id="section-1">参考文档</h2>

<p>本文没有做截图，是由于以下参考文档都有相关截图和步骤说明；因此，在使用本文档的过程中，一定要同时打开这几篇文档。</p>

<p><a href="http://www.ovirt.org/Quick_Start_Guide#Install_oVirt_Engine_.28Fedora.29%60">http://www.ovirt.org/Quick_Start_Guide#Install_oVirt_Engine_.28Fedora.29%60</a></p>

<p><a href="http://jensd.be/?p=550">http://jensd.be/?p=550</a></p>

<p><a href="https://xrsa.net/2015/02/04/installing-ovirt-3-5-on-centos-7-hosted-engine/">https://xrsa.net/2015/02/04/installing-ovirt-3-5-on-centos-7-hosted-engine/</a></p>

<p><a href="http://www.server-world.info/en/note?os=Fedora_22&amp;p=kvm&amp;f=8">http://www.server-world.info/en/note?os=Fedora_22&amp;p=kvm&amp;f=8</a></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-07-09T23:42:07+08:00"><a href="/2015/07/09/boston-nyc-running-log/">July 09, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2015/07/09/boston-nyc-running-log/" rel="bookmark" title="Boston 和 NYC 的 运动日志" itemprop="url">Boston 和 NYC 的 运动日志</a></h1>
    
  </header>
  <div class="entry-content">
    <h2 id="section">波士顿的跑步</h2>

<h3 id="section-1">第一跑 - 12公里</h3>

<p><a href="http://martinliu.cn/boston-running-log/0709_8/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/0709_8-576x1024.jpg" alt="0709_8" /></a></p>

<p>推辞了饭局的夜跑，跑步过程中被阵雨浇透，找错了回来的桥，路程没有记录完整。</p>

<h3 id="section-2">第二跑 - 8公里</h3>

<p><a href="http://martinliu.cn/boston-running-log/0709_9/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/0709_9-576x1024.jpg" alt="0709_9" /></a></p>

<p>本想跑的比前一次更远，结果起晚了，跑了8公里就被晒的不行，汗狂出，提前失去斗志，返回。这时感觉还是有跑友会更好些。</p>

<h3 id="section-3">第三跑 - 10公里</h3>

<p><a href="http://martinliu.cn/boston-running-log/0709_10/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/0709_10-576x1024.jpg" alt="0709_10" /></a></p>

<p>陪同事满跑10K，在一个海湾处，居然海湾是闭合的，跑了三圈，其实那个Castle Island Park有点意思，可惜没有进去。</p>

<h3 id="section-4">第四跑 - 10公里</h3>

<p><a href="http://martinliu.cn/boston-running-log/0709_11/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/0709_11-576x1024.jpg" alt="0709_11" /></a></p>

<p>领略了市内最繁华的街道，最美的市中心公园，跑过了 林阴道，再次重温河边的感觉，这是下午下班后的跑步，不管你是什么时间，什么地点跑，基本上到处都是跑步的人。</p>

<h2 id="section-5">波士顿骑行</h2>

<h3 id="km">第一次  46.4 km</h3>

<p><a href="http://martinliu.cn/boston-running-log/screenshot_2015-06-25-21-45-21/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/Screenshot_2015-06-25-21-45-21-576x1024.jpeg" alt="Screenshot_2015-06-25-21-45-21" /></a></p>

<p>自行车租金是25刀，下午开完会发现其它两个同伴时差严重，因此我独自骑行出去。骑行的方向其实是波士顿马拉松延伸的方向，只是那个路线是要在公路上的，车多没法骑行那个赛道，骑车出去闲逛，也超过了一个全马的距离，基本上把哈佛和MIT逛清楚了。</p>

<h3 id="km-1">第二次 21.7 km</h3>

<p><a href="http://martinliu.cn/boston-running-log/0709_12/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/0709_12-576x1024.jpg" alt="0709_12" /></a></p>

<p>第二次，本来不想去，可是需要给伙伴去带路，就带他们走了一遍昨天的路，让他们也浏览了我看过的景点。</p>

<h2 id="km-2">纽约跑步 - 中央公园 10KM</h2>

<p><a href="http://martinliu.cn/boston-running-log/0709_14/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/0709_14-576x1024.jpg" alt="0709_14" /></a></p>

<p>中央公园打卡跑过，很满意的得到了这个路线，公园里里面的运动氛围很强，爽跑一圈。</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-07-09T22:31:15+08:00"><a href="/2015/07/09/e9-a6-96-e6-ac-a1-e7-be-8e-e5-9b-bd-e4-b8-9c-e6-b5-b7-e5-b2-b8-e4-b9-8b-e6-97-85/">July 09, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2015/07/09/e9-a6-96-e6-ac-a1-e7-be-8e-e5-9b-bd-e4-b8-9c-e6-b5-b7-e5-b2-b8-e4-b9-8b-e6-97-85/" rel="bookmark" title="首次美国东海岸之旅" itemprop="url">首次美国东海岸之旅</a></h1>
    
  </header>
  <div class="entry-content">
    <h2 id="section">行程</h2>

<p>在波士顿的住宿是非常完美的体验。先住了两天剑桥的LeMeridien（SPG）；由于6月是我的生日，因此酒店给我加了早餐，使用IBM的企业代码订房确实便宜了一大块。剩下几天住的Westin Waterfront，和另外一个SPG白金卡同事同住，由于是白金卡，所以直接就给升级到套房了，当然附赠免费早餐；今房间一看，很大的两间房间，各自独立的电视和洗手间。</p>

<p>说下在美国第一次做长途BUS的感受，我是在网上定的票。从波士顿到纽约4个多小时的路程，28$的价格。由于我记错了时间，同事开车送我去车站后，我看了票后，才惊醒，到达候车室的时候，我的那班车已经开车15分钟了。车票是电子邮件中的二维码。我问车站的工作人员，他说你需要去standby下一班车，下一班车要过1小时后发车，我到了那边standby的队列中。心里真是有点没谱，如果那个车上没有空位的话，我就残了。还好，开始上车时第一批是买了那班车票的人；第二批是standby的人，还好有空座位。最后一波是需要副现金上车，而没有买票的人，那部分人好像话了50多刀。在开车的过程中没有停车，车上居然有卫生间，就在车的尾部，我也用了一下，确实很方便，很干净。到了纽约之后，一下车我就走向最近地铁站开始了我的纽约之行。</p>

<h2 id="section-1">波士顿</h2>

<p>波士顿有美国的雅典之称，到处透露着历史感，街道相当干净，气温体感非常舒服。这是一个运动的城市每年的波士顿马拉松比赛不知道吸引了多少人，作为一个跑步爱好者，我到此地也算是朝圣之旅了。到的第二天，就有BAA的10公里的比赛，我看到了才意识到，应该提前报名，说不定可以参加上呢！</p>

<p>在波士顿我跑了三次。第一次本想早晨跑，提前规划好的路线，可是早晨下雨，没有跑成。结果晚上回来后，同事拉我去配客户吃饭，没去，夜跑了十二公里。在跑的中间下雨了，是阵雨，淋了我20多分钟，浑身湿透了，快回到酒店的时候雨停了。回来查跑步轨迹一看，还是跑错了路线，返回的桥还是选择错了，回程的路线基本正确。第二次跑步是早晨晨跑，起的有点晚，还是在查尔斯河边和前一次一样，这次看到了很多早晨练习划船的人，非常多的人在河上划着各种船，有些是有教练指导的，有些是自己联系的。第三次是和同事一起，在海边找了一个港口的地方，港口恰好是环形封闭的，跑了3圈，10公里。第四次是开晚会去跑步，在市中心的酒店跑到城市中心公园，有跑回查尔斯河，然后返回，返回过程中遇到上坡下坡，一个人有点累，10公里做罢。回程一边找路一边欣赏城市，也算是把波士顿城区看了仔细。剩下两次运动是骑行，这里骑行的人也很多。自己骑了一次，和同事一起骑行一次，一共50公里。顺便欣赏了哈佛和MIT学校的校园。</p>

<p>波士顿的龙虾不可以不提，吃了三次，后两次在同一家吃的，这家专门做龙虾，吃的非常过瘾。</p>

<h2 id="section-2">纽约</h2>

<p>在纽约我住在airbnb的一个民宅里，主人是个南美小国的人，他没有工作；估计也是租来的房子，然后转祖一间卧室做房东，airbnb算是让他也有钱赚，有生计了。这个公寓里中央公园很近，我去中央公园跑了一次，感觉非常好，那里有浓厚的运动气息，各种人在里面跑步，骑车，散步，骝狗。两次穿过中央公园都有看到跑步比赛。我买了一张5天的地铁票，算是用足了。去了很多景点，感受到了大纽约的感觉。现在感觉纽约一周可以逛的差不多，4天根本不够。我最完美的两天是大都会博物馆和自由女神/爱丽丝岛。大都会博物馆里面我足足泡了一天，停没电了3个讲解器；直到人闭馆赶人，我才走，看了四分之三不到。真是有点走马观花，很多没有看仔细。自由女神像其实可以注册一下，就能够登到它的身体里，到达头部，从眼睛往外看，我也是去了才知道。爱丽丝岛值的仔细看，它是美国移民博物馆，看了它，彻底颠覆了我对美国移民的看法。</p>

<p>时间有限，工作太忙，就这个流水帐，算是总结一下这次美国东岸之旅吧！</p>

<h2 id="section-3">图片</h2>

<p>以下图片都是手机拍摄。</p>

<p>[gallery link=”file” ids=”53844,53845,53846,53847,53848,53849,53850,53851,53852,53853,53854,53855,53856,53857,53858,53859,53860,53861,53862,53863,53871,53865,53866,53867,53868,53869,53870,53873,53874,53877,53876,53875,53878”]</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-07-09T16:44:43+08:00"><a href="/2015/07/09/icinga2-e4-bc-81-e4-b8-9a-e7-ba-a7-e5-8a-9f-e8-83-bd-e8-af-84-e6-b5-8b1/">July 09, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2015/07/09/icinga2-e4-bc-81-e4-b8-9a-e7-ba-a7-e5-8a-9f-e8-83-bd-e8-af-84-e6-b5-8b1/" rel="bookmark" title="icinga2 企业级功能评测1" itemprop="url">icinga2 企业级功能评测1</a></h1>
    
  </header>
  <div class="entry-content">
    <h2 id="icingaweb-2-">Icingaweb 2 用户权限管理</h2>

<p>icingaweb 2 是诸多GUI中最新的一种，也有替代其它之前所有GUI的趋势，目前看还比较新，只有最基本的功能。登陆Web界面的用户，用户和组的信息可以使用自己的数据库存储或者配置文件存储，也可以使用外部的LDAP集成，使用php-ldap模块集成外部的LDAP/MS AD服务器。
具有完整的RBAC模式; User -&gt; Group -&gt; Role = Permission Set（操作 action） + monitoring/filter/objects(范围 scope)</p>

<p><a href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-web-create-group/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/Icinga-Web-create-group-1024x659.png" alt="Icinga Web - create group" /></a> <a href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-web-create-role/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/Icinga-Web-create-role-1024x659.png" alt="Icinga Web - create role" /></a> <a href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-web-create-user/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/Icinga-Web-create-user-1024x659.png" alt="Icinga Web - create user" /></a> <a href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-web-assign-user-to-group/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/Icinga-Web-assign-user-to-group-1024x659.png" alt="Icinga Web - assign user to group" /></a></p>

<h2 id="icinga2-">Icinga2 的联系人和联系人组</h2>

<p>在icinga2服务器端，在配置文件中定义了组和用户，他们在Web GUI界面上叫做 Contacts / Contactgroups 。</p>

<p>[bash]
[root@icinga2-test conf.d]# cat users.conf
/**
* The example user ‘icingaadmin’ and the example
* group ‘icingaadmins’.
*/</p>

<p>object User “icingaadmin” {
import “generic-user”</p>

<p>display_name = “Icinga 2 Admin”
groups = [ “icingaadmins” ]</p>

<p>email = “martin@aws-faq.com”
}</p>

<p>object UserGroup “icingaadmins” {
display_name = “Icinga 2 Admin Group”
}
[/bash]</p>

<p>User / UserGruop 是Icinga出发通知的对象，定义在这个配置文件中，使用规则把他们和监控对象（host/service/等）关联起来，在通知规则中实现不同的通知策略。如发邮件等。</p>

<h2 id="icinga2ha">Icinga2的HA和分布式架构</h2>

<p><a href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-cluster/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/icinga-cluster-1024x288.png" alt="icinga-cluster" /></a></p>

<p>icinga2的Cluster是通过多个运行的实例配置在一起的，有这样几个特性：实例之间使用SSL的加密通信；彼此之间是双向连接；用Zone来分隔不同租户的配置域；基于Hash的负载分配；系统的各种功能组件由Cluster来管理其分布。它可以实现某个节点宕机后的自动分布监控数据采集命令在其它节点上的执行。</p>

<p><a href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-zone/"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2015/07/icinga-zone-1024x712.png" alt="icinga-zone" /></a></p>

<p>icinga2 Client是远程执行的一种节点，它和Cluster中的所有节点形成群集，在数据中心的其它网段或者地点采集本地的监控状态数据，然后把结果传送回上级的Cluster群集节点。icinga2可以通过配置向导完成远程client/Satellite卫星节点的配置。它们之间的通行是基于证书的TLS加密，这个证书可以借用puppet的证书。远程Client/Satellite节点可以运行在三种模式下：具有本地监控配置，没有本地监控配置，靠上级群集发送监控配置。</p>

<p>其它企业级功能在后续文章中继续评测，您可以通过下面的评论，来提出您所关注的待评测功能。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="/page5/" class="btn">向前</a></li>
      
    

    
    
      <li><a href="">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="/page4/">4</a></li>
      
    
      
        
        
        
        <li><a href="/page5/">5</a></li>
      
    
      
        <li><strong class="current-page">6</strong></li>
      
    
      
        
        
        
        <li><a href="/page7/">7</a></li>
      
    
      
        
        
        
        <li><a href="/page8/">8</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="/page93/">93</a></li>
    

    
    
      <li><a href="/page7/" class="btn">下一页</a></li>
    
  </ul>
</div>



</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Martin Liu.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>



          

</body>
</html>