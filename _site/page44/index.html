<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Martin's Blog</title>
<meta name="description" content="DevOps Coach & Cloud Expert">
<meta name="keywords" content="DevOps, Cloud, AWS, HCI, Nutanix, ITSM">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/path.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="DevOps Coach & Cloud Expert">
<meta name="twitter:creator" content="@zliu">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="DevOps Coach & Cloud Expert">
<meta property="og:url" content="/page44/">
<meta property="og:site_name" content="Martin's Blog">





<link rel="canonical" href="/page44/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Martin's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Martin Liu photo" class="author-photo">
					<h4>Martin Liu</h4>
					<p>DevOps Coach, Cloud Expert, Runner</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:67120666@qq.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/zliu"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+MartinLiu-cn"><i class="fa fa-fw fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="https://linkedin.com/in/liuzheng"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/martinliu"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="/about/" >About</a></li>
	  
	    
	    <li><a href="http://mademistakes.com" target="_blank">Ex site</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="/images/path.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Martin's Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-07-27T12:37:42+08:00"><a href="/2012/07/27/e5-a6-82-e4-bd-95-e9-85-8d-e7-bd-aecloudstack-e7-9a-84iso-e4-b8-8b-e8-bd-bd-e7-ab-99-e7-82-b9/">July 27, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2012/07/27/e5-a6-82-e4-bd-95-e9-85-8d-e7-bd-aecloudstack-e7-9a-84iso-e4-b8-8b-e8-bd-bd-e7-ab-99-e7-82-b9/" rel="bookmark" title="如何配置CloudStack的ISO下载站点" itemprop="url">如何配置CloudStack的ISO下载站点</a></h1>
    
  </header>
  <div class="entry-content">
    <p>首先，需要安装和准备Web服务器，不管是iis还是apache，你需要增加一个MIME类型，需要把.iso作为一个正确的类型添加到配置中；如何添加，去google一下即可，这里不做描述。配置好了以后把ISO文件或者文件夹放到web站点相应的目录中。可以使用管理节点上的浏览器测试一下URL是否可以正常访问。
其次，配置CloudStack管理节点，告诉他允许下载的Web站点在那个网段。这个配置需要进入Global Settings，搜索secstorage关键字，找到一个叫做“secstorage.allowed.internal.sites”的配置参数。点击action下面的编辑按钮。我输入的是192.168.10.0/24，敲回车确认即可。这个参数是说，Web服务器的网段在192.168.10.0；然后到管理节点的命令行重启服务
[bash]
service cloud-management restart
[/bash]</p>

<p>最后，等服务起来之后，重新登陆管理界面，这下子就可以开始正常的iso模板添加操作了。否则应该会碰到connection refused的错误。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-07-25T12:25:31+08:00"><a href="/2012/07/25/e5-a6-82-e4-bd-95-e6-8a-8acloudstack-e7-9a-84-e6-b5-8b-e8-af-95-e7-8e-af-e5-a2-83-e6-8e-a8-e5-88-b0-e9-87-8d-e6-9d-a5/">July 25, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2012/07/25/e5-a6-82-e4-bd-95-e6-8a-8acloudstack-e7-9a-84-e6-b5-8b-e8-af-95-e7-8e-af-e5-a2-83-e6-8e-a8-e5-88-b0-e9-87-8d-e6-9d-a5/" rel="bookmark" title="如何把CloudStack的测试环境推到重来" itemprop="url">如何把CloudStack的测试环境推到重来</a></h1>
    
  </header>
  <div class="entry-content">
    <p>感觉系统不对劲的时候，可能你会大动干戈把当前的系统铲掉重来。那么这些步骤可能值得参考一下。</p>

<p>第一部分：数据库的重新初始化
[bash]
[root@cloudstack ~]# mysql -uroot -pcitrix
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 45
Server version: 5.1.52-log Source distribution</p>

<p>Copyright (c) 2000, 2010, Oracle and/or its affiliates. All rights reserved.
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL v2 license</p>

<p>Type ‘help;’ or ‘\h’ for help. Type ‘\c’ to clear the current input statement.</p>

<p>mysql&gt; drop database cloud; drop database cloud_usage;</p>

<p>[/bash]
把老的数据库干掉之后，在重新初始化数据库。
[bash]
[root@cloudstack ~]# cloud-setup-databases cloud:citrix@localhost –deploy-as=root:citrix
Mysql user name:cloud                                                           [ OK ]
Mysql user password:citrix                                                      [ OK ]
Mysql server ip:localhost                                                       [ OK ]
Mysql server port:3306                                                          [ OK ]
Mysql root user name:root                                                       [ OK ]
Mysql root user password:citrix                                                 [ OK ]
Checking Cloud database files …                                               [ OK ]
Checking local machine hostname …                                             [ OK ]
Checking SELinux setup …                                                      [ OK ]
Detected local IP address as 192.168.10.15, will use as cluster management server node IP[ OK ]
Preparing /etc/cloud/management/db.properties                                   [ OK ]
Applying /usr/share/cloud/setup/create-database.sql                             [ OK ]
Applying /usr/share/cloud/setup/create-schema.sql                               [ OK ]
Applying /usr/share/cloud/setup/create-database-premium.sql                     [ OK ]
Applying /usr/share/cloud/setup/create-schema-premium.sql                       [ OK ]
Applying /usr/share/cloud/setup/server-setup.sql                                [ OK ]
Applying /usr/share/cloud/setup/templates.sql                                   [ OK ]
Applying /usr/share/cloud/setup/create-index-fk.sql                             [ OK ]
Processing encryption …                                                       [ OK ]
Finalizing setup …                                                            [ OK ]</p>

<p>CloudStack has successfully initialized database, you can check your database configuration in /etc/cloud/management/db.properties</p>

<p>[root@cloudstack ～] cloud-setup-management<br />
Starting to configure CloudStack Management Server:
Configure sudoers …         [OK]
Configure Firewall …        [OK]
Configure CloudStack Management Server …[OK]
CloudStack Management Server setup is Done!
[/bash]</p>

<p>第二部分：重新初始化主从存储
用root登录到/primary 和 /secondary 目录中直接删除看到的所有目录和文件。 
在下载系统VM包，/usr/lib64/cloud/agent/scripts/storage/secondary/cloud-install-sys-tmplt -m /home/secondary -u http://download.cloud.com/templates/acton/acton-systemvm-02062012.vhd.bz2 -h xenserver -F
上面这个命令完了之后，到/secondary 目录中查看下载结果。</p>

<p>第三部分：重新安装host上的hypervistor
重装XenServer或者其KVM，然后去装cloudStack的包或者agent。
wget http://download.cloud.com/releases/3.0.1/XS-6.0.2/xenserver-cloud-supp.tgz
下载完了之后，解压缩，然后安装。</p>

<p>第四部分：重新初始化管理服务器
登录http：//192.168.10.15：8080/client 接下来熟悉的初始化向导再次出现在你面前，如果你的浏览器已经纪录了你以前的输入的话，这下连打字都不用了。轻松初始化测试环境。在这个过程中只有添加host，过程会稍微长一点，完了之后，在XenServer上可以看到两个虚拟机s-1-vm和v-2-vm；到此测试环境初始化过程完毕，登录之后，你发现整个世界清净了，世界一下子变得很美好，又可以开始接着折腾了。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-07-15T23:28:02+08:00"><a href="/2012/07/15/what-are-zero-clients-and-how-are-they-different-from-thin-clients/">July 15, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2012/07/15/what-are-zero-clients-and-how-are-they-different-from-thin-clients/" rel="bookmark" title="What are 'zero clients,' and how are they different from thin clients?" itemprop="url">What are 'zero clients,' and how are they different from thin clients?</a></h1>
    
  </header>
  <div class="entry-content">
    <p>称之为“无状态”的零客户机即将袭来，可能占据主要市场地位。与瘦机相比主要是更节约管理成本。加入你用的是Windows嵌入式系统的话，那么你也会收到打补丁和操作系统配置变更的烦恼。加入你用Wyse Xenith的话，那么这个世界一下就变得如此简单了，由于它必然会用到一种虚拟桌面方案，那么XenDesktop就是首选了，其实XenDesktop里面早已经集成了Wyse零客户机的管理模块，所有的零客户机就在开机的过程中，就会自动做到系统底层可能有的升级或者补丁。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-07-12T01:04:22+08:00"><a href="/2012/07/12/e5-a6-82-e4-bd-95-e6-b5-8b-e8-af-95-xenapp-mobility-pack/">July 12, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2012/07/12/e5-a6-82-e4-bd-95-e6-b5-8b-e8-af-95-xenapp-mobility-pack/" rel="bookmark" title="如何测试 XenApp Mobility Pack" itemprop="url">如何测试 XenApp Mobility Pack</a></h1>
    
  </header>
  <div class="entry-content">
    <p>安装XenApp6.5，下载XenApp6_5MobilityPack1_0.zip；解压缩之后是三个文件，我习惯于先打那个补丁包，然后在安装CitrixGroupPolicyManagement_x64.msi文件（我的测试系统是64位的）。</p>

<p>安装完之后，XenApp里面多了什么？多了两个自动运行的服务。如下图所示：</p>

<p><a href="http://cdn1.martinliu.cn/wp-content/uploads/2012/07/mp-services.png"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2012/07/mp-services.png" alt="" /></a></p>

<p>XenApp的管理策略里面多了什么？如下图所示：</p>

<p><a href="http://cdn1.martinliu.cn/wp-content/uploads/2012/07/3-functions.png"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2012/07/3-functions.png" alt="" /></a></p>

<p>这些策略怎么测试？先启用这些策略，再使用Pad设备或者其它移动设备测试即可。</p>

<ul>
  <li>
    <p>启动触控优化桌面：发布一个Xenapp的共享桌面，pad连上后，可以看到右上角有个半透明的块，点击它既可以在优化和普通桌面直接切换，切换之后，世界一下子变得特别美好，enjoy！</p>
  </li>
  <li>
    <p>远程控制组合框：发布一个界面或者页面上有下拉框的程序，用移动设备连上后，在点击这些页面的下拉框，看看这世界变得和以前有何不同。</p>
  </li>
  <li>
    <p>自动显示键盘：发布一个界面或者页面上有文本输入框的程序，用移动设备连上后，点击文本框，让它获得焦点，接着输入字符，接着点击别的地方，让它失去焦点。想想你以前类似的过程是怎么操作的，是不是发现以前的日子有点点苦逼了吧？</p>
  </li>
</ul>

<p>还能够做什么绚丽的演示？</p>

<p>可以在http://www.citrix.com/mobilitysdk/docs/downloads.html 网站下载官方的演示程序，<a href="http://www.citrix.com/mobilitysdk/docs/downloads/CMP.NET%20MobilitySDK%20%23318504.3.zip">点此处下载</a>。这个程序既包含源代码有包含编译好的可执行文件，把它们都copy到xenapp服务器上，发布一下那里面的可执行程序，用pad或者手机连上，看看有什么新发现，是否感觉这简直就是一个原生的ios或者安卓程序呢？</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2012-07-11T00:27:14+08:00"><a href="/2012/07/11/32gb-xenserver-publish-28-xp-vd/">July 11, 2012</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2012/07/11/32gb-xenserver-publish-28-xp-vd/" rel="bookmark" title="32GB测试笔记本电脑成功发布28个XP虚拟桌面" itemprop="url">32GB测试笔记本电脑成功发布28个XP虚拟桌面</a></h1>
    
  </header>
  <div class="entry-content">
    <p>一直想搞清楚，这台强悍的测试机到底能够撑得住多少个虚拟桌面。今天终于测了一下，稍微满足了一下子好奇心。
底层装的是最新版的XenServer6.02，模板机XP做了一些优化，调整为动态内存到1024~2048，其实可以调整到更小，如512~1024，下次在测试一下这个方案，不过那样可能登录速度和登陆后桌面点击的反应会有一定的折扣；本次不考虑那么多，只是想看看这个本本到底能够跑多少虚拟机。存储使用的是NAS存储，桌面是发布的专有模式桌面。有图有真相，下面的截屏供参考：</p>

<p>[nggallery id=15]</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="/page43/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="/page42/">42</a></li>
      
    
      
        
        
        
        <li><a href="/page43/">43</a></li>
      
    
      
        <li><strong class="current-page">44</strong></li>
      
    
      
        
        
        
        <li><a href="/page45/">45</a></li>
      
    
      
        
        
        
        <li><a href="/page46/">46</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="/page93/">93</a></li>
    

    
    
      <li><a href="/page45/" class="btn">Next</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Martin Liu. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>



          

</body>
</html>