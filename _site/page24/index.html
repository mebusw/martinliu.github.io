<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Martin's Blog</title>
<meta name="description" content="DevOps Coach & Cloud Expert">
<meta name="keywords" content="DevOps, Cloud, AWS, HCI, Nutanix, ITSM">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/path.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="DevOps Coach & Cloud Expert">
<meta name="twitter:creator" content="@zliu">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="DevOps Coach & Cloud Expert">
<meta property="og:url" content="/page24/">
<meta property="og:site_name" content="Martin's Blog">





<link rel="canonical" href="/page24/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Martin's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">首页</a></li>
		<li>
			<a href="#">关于</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Martin Liu photo" class="author-photo">
					<h4>Martin Liu</h4>
					<p>DevOps Coach, Cloud Expert, Runner</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">详情</span></a></li>
				<li>
					<a href="mailto:67120666@qq.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/zliu"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+MartinLiu-cn"><i class="fa fa-fw fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="https://linkedin.com/in/liuzheng"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/martinliu"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">文章</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">所有文章</a></li>
				<li><a href="/tags/">所有分类</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="http://www.aws-faq.com" target="_blank">AWS-FAQ</a></li>
	  
	    
	    <li><a href="http://devopscoach.org" target="_blank">DevOps教练</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="/images/path.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Martin's Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-02-08T11:17:37+08:00"><a href="/2014/02/08/e5-bc-80-e6-ba-90-e6-9c-8d-e5-8a-a1-e5-99-a8-e7-9a-84-e6-97-b6-e4-bb-a3-e7-9c-9f-e5-88-b0-e4-ba-86-ef-bc-9f/">February 08, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2014/02/08/e5-bc-80-e6-ba-90-e6-9c-8d-e5-8a-a1-e5-99-a8-e7-9a-84-e6-97-b6-e4-bb-a3-e7-9c-9f-e5-88-b0-e4-ba-86-ef-bc-9f/" rel="bookmark" title="开源服务器的时代真到了？" itemprop="url">开源服务器的时代真到了？</a></h1>
    
  </header>
  <div class="entry-content">
    <p>今天广为关注的的新闻末过Facebook的单人管理上万服务器。上网看了一下此新闻的出处：<a href="http://www.datacenterknowledge.com/archives/2013/11/20/facebook-ops-staffer-manages-20000-servers/">http://www.datacenterknowledge.com/archives/2013/11/20/facebook-ops-staffer-manages-20000-servers/ </a> 本文的描述如下：Delfina Eberly, Director of Data Center Operations, Facebook, presented the Tuesday morning keynote about optimizing data center operations. In terms of hardware, Facebook, because it runs such an enormous volume of servers, focuses on serviceability, including starting from the ground up by influencing server design to ensure easiest and least time consuming methods to repair equipment in the data hall.</p>

<!-- more -->

<p><img src="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/eberly2.jpg" alt="eberly2" /></p>

<p>她是Facebook公司的数据中心运营总监，在昨天早晨发表了关于如何优化数据中心运维的演讲。从硬件方面看，为了满足它们巨大的用量，她们不得不把精力完全放到硬件的服务提供性上，说白了“黑猫，白猫，能捉到耗子的就是好猫”，因此她们被逼去自己从服务器硬件设计开始构造自己的数据中心神殿。为什么说是被逼的，你可以想象：加入IBM，DELL，HP之流的sales推门进去，告诉她们你们买我们的服务器吧，保证好用！可能在她们也买得起，但是绝对用不起，用不起是由于：服务器的采购，供货，修复，维保，这一切都靠供应商的话，从时间和效率上将Facebook觉得耗不起。一旦依赖了供应商，自己就必然失去了主导权，多了一重羁绊，无法满足facebook这样公司的高速成长。一切创新其实都是被逼出来的。</p>

<p>这让我感兴趣Mark最近在搞些啥，我简单转发两个我看到并感兴趣的网站。</p>

<blockquote>Internet.org 汇聚全球合作伙伴，通力合作，使世界上三分之二尚不能上网的人口能够上网。</blockquote>

<p><a href="http://Internet.org">Internet.org </a> 这个网站上最抢眼的还是首页最上端的那个视频，很可惜国内用户看不到youtub，我在这里把Mark的这个视频在我的网站上转贴一下。</p>

<p>[video width=”640” height=”360” mp4=”http://cdn1.martinliu.cn/wp-content/uploads/2014/02/Making-the-Internet-Affordable.mp4”][/video]</p>

<p>这个视频主要是Mark亲自现身说法说如何让上网成本更低，争取能做到让全世界更多的人民上网的宏大理想。听完之后，这不能不让我和今天的另外的一个新闻“facebook收购 <a href="http://www.onavo.com/">Onavo</a>”联系起来，表面上看Onavo是他实现这个理想的一种工具；另外一个邪恶的说法，则说：”他想控制这个世界所有人上网的流量“；我们拭目以待，他们是如何改造地球的吧！</p>

<p><img src="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/open-computer-logo.png" alt="open-computer-logo" /></p>

<p>另外一个网站是这个，开源计算机项目网站。我一直对开源的项目尤为感兴趣，甚至于开源的“窗台农庄项目”。但是主要还是开源软件了解的多。这个网站是Facebook主导的一个项目，目的在于开放他们部分服务器硬件和数据中心设计的技术。确实是一个很不错的学习资料。在这里我又看到了类似于QQ和中国移动竞争的类似场景。如果这个项目火了，这让那些买服务器的公司情何以堪啊！但是我因此加深了IBM卖掉PC业务给联想的这个事实。国人一直在接受人家过期的技术和业务，这样值得么？从业务的角度上讲，短期是还是值得的，原因是：国内IT的发展总是滞后于欧美3到5年时间。我感觉滞后的原因主要还是语言和文化的不通。</p>

<p>如果对Facebook的数据中心感兴趣的话还可以看看这个FAQ, <a href="http://www.datacenterknowledge.com/the-facebook-data-center-faq/">http://www.datacenterknowledge.com/the-facebook-data-center-faq/</a></p>

<p><img src="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/facebook-faq-470-new.jpg" alt="facebook-faq-470-new" /></p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-02-08T00:18:06+08:00"><a href="/2014/02/08/e4-bc-98-e5-8c-96wordpress-e9-a1-b5-e9-9d-a2-e5-88-b0-e4-b8-80-e7-a7-92-e5-86-85/">February 08, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2014/02/08/e4-bc-98-e5-8c-96wordpress-e9-a1-b5-e9-9d-a2-e5-88-b0-e4-b8-80-e7-a7-92-e5-86-85/" rel="bookmark" title="优化 WordPress 页面到一秒内" itemprop="url">优化 WordPress 页面到一秒内</a></h1>
    
  </header>
  <div class="entry-content">
    <p>本帖系技术贴，目的在于总结一下这次对本站点优化的经历。总之结果很重要，把基本上所有页面都优化到大约0.8秒左右的载入速度。如果你也是在独立LAMP服务器上运行WordPress的话，我想本文可能对你会有所帮助。 <!-- more --></p>

<h2 id="wordpress-">Wordpress 服务器配置</h2>

<p>服务器是在阿里云上的主机，主机的配置比较低：1vCPU，1GB内存；后台数据库是RDS服务。</p>

<p><a href="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/pic-003.jpg"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/pic-003.jpg" alt="pic-003" /></a></p>

<p>服务器的操作系统是Debian，安装的php的情况见 <a href="http://martinliu.cn/info.php">phpinfo.php</a> 的输出。</p>

<p>WordPresss所安装的插件如下：akismet syntax-highlighter download-monitor update-twitter-php google-sitemap-generator use-google-libraries wordpress-popular-posts wordpress-seo jiathis wp-easyarchives kimili-flash-embed wpjam-qiniu memcached wp-pagenavi nextgen-gallery wp-postviews optimize-db wp-recentcomments
regenerate-thumbnails wp-super-cache revslider wp_video-master shortcodes-ultimate yet-another-related-posts-plugin simple-google-analytics</p>

<h2 id="wordpress-wp-super-cache">Wordpress 插件：<strong>WP Super Cache</strong></h2>

<p>Super Cache 使用的是： mod_rewrite 缓存模式。 并开启了：使用对象缓存系统来存储缓存文件。 (实验室功能)  这个功能和memcached插件是相关的。在CDN的配置这里，开启了CDN的支持，并把off-site URL指向了 http://martinliu.qiniudn.com 七牛的空间。</p>

<p><a href="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/pic-002.jpg"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/pic-002.jpg" alt="pic-002" /></a></p>

<p>现在很多页面查看源码的时候，都可以看到是0.8秒以内的速度，这个速度起码是本站点有史以来的最快速度。不光服务器速度快了，更重要的是所有静态文件也都是用的大陆的本土CDN站点了。</p>

<h2 id="wordpress-memcached--memcached">Wordpress 插件：**memcached 和 MemCached服务</h2>
<p>**</p>

<p>这个插件我第一次用，真可谓是神器，它需要和操作系统的memcached服务配合起来使用；这个插件的安装比较反常规：不能在控制台里面启用，根本就启用不了，需要安装插件后，在未激活的状态下，把它的文件手工放到wp-content目录里面即可。操作系统的memcached的服务安装和配置也比较简单，总之运行基本全都靠默认的配置参数即可。另外php的memcached模块也要安装并启用。它们配合起来能够把页面的request次数降低到冰点。我的主页用这个组合之前需要30次左右的request，用了之后就3次了，它主要是靠内存做缓存，从而加速了网站。</p>

<p><a href="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/pic-3.jpg"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/pic-3.jpg" alt="pic-3" /></a></p>

<p>上图是本站首页的测试结果，亮点在它只有3个请求，Web服务器只是做了三个响应就完事了，这个页面的内容就全都可以发给浏览器了。减少了20多次请求的处理，这些请求的结果都被memcached给缓存到内存里面了，目前只能够给memcached开80MB的缓存空间，也就这点内存常驻的网站缓存解决了大问题。加速页面的响应速度。不得不说memcached服务还是挺NB的。</p>

<p><a href="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/pic-001.jpg"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2014/02/pic-001.jpg" alt="pic-001" /></a></p>

<p>上图是一个常规的文章页面，请数量从以前的30左右降到10以内，我什么也不说了。当然上面这连个图里面也能看出本网站的一点问题，这里也不说了。</p>

<h2 id="wordpress-wpjam-">Wordpress 插件：<strong>WPJAM 七牛镜像存储</strong></h2>

<p>本次折腾主要冲着这个来的。CDN我是第一次玩，不过用一次之后，感觉也挺简单的。先要找一个免费的CDN服务商开一个空间，之后一般送1GB空间一个月1GB流量，对我的网站来说足够了。配置完之后就拿到了一个二级域名，然后还有几个重要的Key编码。安装了水煮鱼做的这个插件之后，配置完，什么也不用管，网站的哪些静态文件就在首次访问的时候，被自动传到CDN上面了，下次网页再被打开的时候就全都走CDN上下载了，从而把Apache的基本所有静态文件的请求都offload走了，从而降低了服务器的负荷，提升了它对动态内容的反应速度。我的服务器只有1GB内存，用了CDN之后，我也不是很担心内存不够用的问题了。</p>

<h2 id="section">未尽事宜</h2>

<p>由于时间仓促，有几个活也没有时间做。1）我的域名martinliu.cn的DNS查询的速度有时候挺慢的，快也要500ms，有时候甚至超过一两秒，不知道是DNSPod不给力还是我的服务器自身有问题。2）CDN的正规用法需要在服务器端写一个脚本，把wordpress里面需要CDN加速的文件都上传到自己CDN的空间里面，并且可以编写脚本定期增量传输。由于最近太忙，以后有时间在研究这个问题吧。3)wordpress-popular-posts此插件在每个页面上都占用一定的时间，不知道是否能把它消除到。4）Gravatar头像的加速，否则这些图标在评论多的帖子上从国外站点下载，实在是太慢了。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-01-08T18:11:22+08:00"><a href="/2014/01/08/e5-a4-a9-e7-b1-81-e4-b9-8b-e9-9f-b3-e6-97-a0-e8-a8-80-e5-8f-a4-e8-af-97-e8-9d-89/">January 08, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2014/01/08/e5-a4-a9-e7-b1-81-e4-b9-8b-e9-9f-b3-e6-97-a0-e8-a8-80-e5-8f-a4-e8-af-97-e8-9d-89/" rel="bookmark" title="天籁之音 五言古诗 蝉" itemprop="url">天籁之音 五言古诗 蝉</a></h1>
    
  </header>
  <div class="entry-content">
    <p>[audio m4a=”http://cdn1.martinliu.cn/wp-content/uploads/2014/01/chan.m4a”][/audio]</p>

<p><a href="http://cdn1.martinliu.cn/wp-content/uploads/2014/01/chan.jpg"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2014/01/chan.jpg" alt="chan" /></a></p>

<p>垂绥饮清露，流响出疏桐。
居高声自远，非是藉秋风。</p>

<p>–虞世南【初唐】</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-01-08T13:19:28+08:00"><a href="/2014/01/08/garmin-beijing-lsd-club/">January 08, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2014/01/08/garmin-beijing-lsd-club/" rel="bookmark" title="Garmin  Beijing LSD Club" itemprop="url">Garmin  Beijing LSD Club</a></h1>
    
  </header>
  <div class="entry-content">
    <p>我在Garmin网站上建立了一个”长跑俱乐部群“ Beijing LSD Club ； 欢迎各位爱好者加入。LSD的意思是：Long Slow distance running ； 简单说就是长跑。</p>

<p>群的地址： <a href="http://connect.garmin.com/group/514228">http://connect.garmin.com/group/514228</a> ；</p>

<p><a href="http://cdn1.martinliu.cn/wp-content/uploads/2014/01/Being-LSD-Group.png"><img src="http://cdn1.martinliu.cn/wp-content/uploads/2014/01/Being-LSD-Group.png" alt="Being-LSD-Group" /></a></p>

<p>我今天在Garmin Connect上面的群搜索哪里，那么一搜：北京、Beijing；居然什么也没用；我就不信了，北京用Garmin的表的跑友应该也不少，何不大家都聚集起来，互相分享互相激励。热烈欢迎大家参加！</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-01-01T20:37:38+08:00"><a href="/2014/01/01/e9-a9-ac-e4-b8-81/">January 01, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2014/01/01/e9-a9-ac-e4-b8-81/" rel="bookmark" title="马丁" itemprop="url">马丁</a></h1>
    
  </header>
  <div class="entry-content">
    <p>如果你把思考交给了电视剧；把联系和人际圈交给了手机；把双腿和出行都交给了汽车；把健康都交给了补品和药片负责；那么你的生活也许是时尚的，但一定是错误的；也许是习惯的，但一定会为此买单的。 请让书，聚会，跑步，锻炼更多的出现在生活里。—— 马丁</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="/page23/" class="btn">向前</a></li>
      
    

    
    
      <li><a href="">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="/page22/">22</a></li>
      
    
      
        
        
        
        <li><a href="/page23/">23</a></li>
      
    
      
        <li><strong class="current-page">24</strong></li>
      
    
      
        
        
        
        <li><a href="/page25/">25</a></li>
      
    
      
        
        
        
        <li><a href="/page26/">26</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="/page93/">93</a></li>
    

    
    
      <li><a href="/page25/" class="btn">下一页</a></li>
    
  </ul>
</div>



</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Martin Liu.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>



          

</body>
</html>