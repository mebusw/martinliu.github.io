<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Martin's Blog</title>
<meta name="description" content="DevOps Coach & Cloud Expert">
<meta name="keywords" content="DevOps, Cloud, AWS, HCI, Nutanix, ITSM">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/path.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="DevOps Coach & Cloud Expert">
<meta name="twitter:creator" content="@zliu">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="DevOps Coach & Cloud Expert">
<meta property="og:url" content="/page31/">
<meta property="og:site_name" content="Martin's Blog">





<link rel="canonical" href="/page31/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Martin's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Martin Liu photo" class="author-photo">
					<h4>Martin Liu</h4>
					<p>DevOps Coach, Cloud Expert, Runner</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:67120666@qq.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/zliu"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+MartinLiu-cn"><i class="fa fa-fw fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="https://linkedin.com/in/liuzheng"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/martinliu"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="/about/" >About</a></li>
	  
	    
	    <li><a href="http://mademistakes.com" target="_blank">Ex site</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="/images/path.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Martin's Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2013-05-14T12:10:35+08:00"><a href="/2013/05/14/hide-windows-explorer-items/">May 14, 2013</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2013/05/14/hide-windows-explorer-items/" rel="bookmark" title="隐藏Windows  Explorer中的各种东西" itemprop="url">隐藏Windows  Explorer中的各种东西</a></h1>
    
  </header>
  <div class="entry-content">
    <p>XenApp实施工具，隐藏Windows  Explorer中的各种东西。</p>

<p>HideLibraries
Hide libraries icon in the navigation pane of Windows Explorer.
HideFavorites
Hide favorites icon in the navigation pane of Windows Explorer.
HideNetwork
Hide network icon in the navigation pane of Windows Explorer.
HideComputer
Hide computer icon in the navigation pane of Windows Explorer.
HideHomeGroup
Hide home group icon in the navigation pane of Windows Explorer
ShowLibraries
Show libraries icon in the navigation pane of Windows Explorer.
ShowFavorites
Show favorites icon in the navigation pane of Windows Explorer.
ShowNetwork
Show network icon in the navigation pane of Windows Explorer.
ShowComputer
Show computer icon in the navigation pane of Windows Explorer
ShowHomeGroup
Show home group icon in the navigation pane of Windows Explorer
Logoff
In order to changes take effect the explorer shell process needs to be restarted. Specifying the option causes your windows session to logoff immediately.
Reboot
In order to changes take effect the explorer shell process needs to be restarted. Specifying the option causes the computer to reboot immediately.
Help
Displays this usage information.</p>

<p>点此处下载： [download id=”19”]</p>

<p>几乎是做XenApp共享桌面的必备工具。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2013-05-07T10:36:41+08:00"><a href="/2013/05/07/xendesktop-e8-99-9a-e6-8b-9f-e6-a1-8c-e9-9d-a2-e7-b2-be-e5-93-81-e4-b9-a6-e7-b1-8d-e5-af-bc-e8-af-bbpart5/">May 07, 2013</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2013/05/07/xendesktop-e8-99-9a-e6-8b-9f-e6-a1-8c-e9-9d-a2-e7-b2-be-e5-93-81-e4-b9-a6-e7-b1-8d-e5-af-bc-e8-af-bbpart5/" rel="bookmark" title="XenDesktop虚拟桌面精品书籍导读(part5)" itemprop="url">XenDesktop虚拟桌面精品书籍导读(part5)</a></h1>
    
  </header>
  <div class="entry-content">
    <p>[box color=”orange” icon=”flag”]
感谢 Eric Yao 的供稿，<a href="http://weibo.com/ericyaozhen">@老树皮Eric</a>
[/box]</p>

<p>今天是<a href="http://support.citrix.com/article/CTX136546">《Citrix Virtual Desktop Handbook》</a>第二讲的最后一期，专门论述一下PVS的设计。在本期之后我会把所有以往的内容整合在一个完整的白皮书中，稍等几日。。。</p>

<p>请期待基于本系列5篇文章的完整版中文白皮书下载。</p>

<p>Citrix桌面虚拟化实施部署白皮书 第二讲之第五期：PVS的设计</p>

<ol>
  <li>Provisioning Services</li>
</ol>

<p>Citrix Provisioning Services（PVS）使用流化的技术简化了虚拟桌面和物理桌面的部署。计算机从一个单个的共享磁盘镜像上被实时制备（Provisioned），管理员完全不需要去管理或者是给每个单独的用户操作系统打补丁。</p>

<p><strong>1)        **</strong>决断：<strong>**Farm</strong><strong>（场）的数量</strong><em>**</em></p>

<p>一个Provisioning Services的场代表着Provisioning Services基础架构的最高层级。所有在一个场的Provisioning Servers（服务器）都共享同一个SQL 数据库哦Citrix License服务器。当确定需要多少个Provisioning Services的场时，我们一般需要考虑以下几个因素：</p>

<p>l  <strong>网络：</strong>Provisioning Servers会始终和场数据库通信以获取系统配置信息。因此，一般来说每个target devices聚集的地理位置应该部署一个独立的场，当然，如果异地之间的网速足够快，理论上也可以只建立一个Provisioning Services场。</p>

<p>l  <strong>重要程度：</strong>管理者应该决定它可以容仍什么样的风险。尽管可能性非常的低，但是Provisioning Services场如果出问题还是会影响整个组织架构的使用。如果一个公司需要非常高等级的可用性，那么多个场的搭建就可以避免这个问题。</p>

<p>l  <strong>可管理性：</strong>管理者可能需要在基于组织架构划分的基础上，例如国家、地区，又或者是不同部门之间，来进行单独的系统管理。尽管听起来这会增加管理的复杂程度，但是实际上只会增加有限多的配置、桌面创建过程，以及操作系统镜像更新。</p>

<p><strong>2)        **</strong>决断：站点（<strong>**Sites</strong><strong>）的数量</strong><em>**</em></p>

<p>每个Provisioning Services的场都包含一个或者多个的站点。一个Provisioning Services的站点是一个逻辑的实体组成部分，包含了Provisioning Servers（服务器）、vDisk pools，以及target devices的集合。多个站点共享同一个数据库。Target devices可以在同一个站点中容错到其他的Provisioning Servers上。在以下的情况下我们建议创建多个站点：</p>

<p>l  <strong>网络：</strong>站点用来控制Provisioning Services的流数据量。例如，一个站点可以根据站点、rack、或者是刀箱来创建，以确保流数据始终保持在本地而不变成一个网络瓶颈。</p>

<p>l  <strong>组织架构：</strong>另外一个需要创建多个站点的实际理由是企业组织架构的改变。例如，两个公司通过收购合并了，但是有需要在企业整合过程中保持资源的独立。</p>

<p>3)         <strong>决断：数据库的配置</strong></p>

<p>Provisioning Services的数据库存储有所有一个场内的的系统配置信息。Provisioning Services 6.X版本支持一下版本的SQL数据库，包括Express、标准版、企业版的SQL Server 2005、2008R2以及2012版。选择哪一个SQL版本其实是取决于你需要哪一个级别的容错水平。以下的表格是一个SQL 2008R2版本的示例：</p>

<p>Provisioning Services场的数据库的大小很少会超过250M容量，即使在大型环境下也不会。所以，在测试环境下Express版本是最佳选择，因为不需要容错功能。</p>

<p>下面的公式是用来计算Provisioning Services的数据库的容量大小：</p>

<p>4)         <strong>决断：数据库；离线模式</strong></p>

<p>如果到Provisioning Services场的数据库的连接断开，已经连接到Provisioning Servers的target devices仍然可以正常工作，但是新的target devices将会无法启动。</p>

<p>支持离线数据库功能可以让Provisioning Services在失去连接到数据库后仍然可以保持正常操作。在服务器启动时会对数据库做个快照，然后定期保持同步。如果连接丢失，Stream Services会使用最新的一个快照以获取场的配置信息。一旦数据库连接建立起来了，Stream过程会把断线期间的变化同步到数据库中。</p>

<p><em>需要注意的是，离线数据库功能默认下是关闭状态的，而且也仅仅是在生产环境下的稳定的场环境下推荐使用。评估环境下不推荐使用</em></p>

<p>5)         <strong>决断：服务帐号</strong></p>

<p>Stream和SOAP服务会和其他许多不同的Provisioning Services基础架构中的组件进行通信，如下图所示：</p>

<p>6)         <strong>决断：设备集合</strong></p>

<p>设备集合是用来创建和管理target devices逻辑组。创建设备集合可以简化设备管理，因为将来的操作可以不用基于target device级别，而是基于集合这个级别。</p>

<p>设备集合可以基于物理地理位置、子网范围、组织架构中不同的部门来设计。也可以考虑基于vDisk的分配来创建不同的设备集合，这样所有分配到一个特定vDisk的所有的target devices就能被快速的定位。</p>

<p>7)         <strong>决断：</strong><strong>Provisioning Server</strong><strong>（服务器）的内存</strong></p>

<p>运行Provisioning Services的Windows操作系统会把vDisk的部分内容缓存在内存（系统缓存）中以降低从存储中读取的操作。从存储中读取数据的速度是显著低于从内存中读取数据的，所以，正确计算Provisioning Servers的内存是非常关键的。请参见以下的公式：</p>

<p>简单地说，就是给每个vDisk分配2G左右的内存。</p>

<p>8)         <strong>决断：</strong><strong>Scale Up</strong><strong>还是</strong><strong>Scale Out</strong></p>

<p><em>题外话：首先对这两个词进行一下解释：</em></p>

<p><em>Scale Out(<strong>向外扩展)</strong>：就是指企业可以根据需求增加不同的服务器应用，依靠多部服务器协同运算，借负载平衡及容错等功能来提高运算能力及可靠度。</em></p>

<p><em>Scale Up(<strong>向上扩展)</strong>：指企业后端大型服务器以增加处理器等运算资源进行升级以获得对应用性能的要求。</em></p>

<p>随着Farm场的增长，管理员需要作出决定以判断是不是需要给Provisioning Server增加更高的资源，也可以是在场中增加更加多的Provisioning Servers，一下了可以是考虑因素：</p>

<p>l  <strong>冗余：</strong>将用户符合扩展到其他负荷不重的服务器上会有助于降低当Provisioning Servers宕机情况下爱所影响的用户数量。如果公司无法接受单点高性能服务器宕机所造成的损失，那就考虑Scaling Out，就是我们说的向外扩展（既增加多台服务器）。</p>

<p>l  <strong>容错时间：</strong>在一个单台的Provisioning Server上所连接的Target Devices越多，在服务器宕机后所需要的恢复时间也就越多。Citrix的内部测试显示在Provisioning Services 5.6 SP2版本下，1500台Target Devices需要大约8分钟恢复生产能力；</p>

<p>l  <strong>数据中心容量：</strong>数据中心一般都是只有有限的空间、电源、冷却能力，此时，可以考虑Scaling Up，即向上扩展（增加单台服务器的处理能力）。</p>

<p>l  <strong>硬件成本：</strong>刚开始时，可能Scale Up会有更高的性价比，但是继续往后可能Scale Out会开始更具性价比，应该做一个成本分析；</p>

<p>9)         <strong>决断：</strong><strong>vDisk</strong><strong>的存储位置</strong></p>

<p>一个场可以包含一个或者多个的vDisk存储。一般来说有两个主要的选择：</p>

<p>l  <strong>本地存储或者是DAS</strong><strong>：</strong>DAS可以是本地的，或者是基于Block的存储类型，Provisioning Server可以直接访问，例如SATA、SCSI、iSCSI，以及光纤。本地的vDisk就只能被本地的Provisioning Server所反问，因此，vDisk应当被手动或者自动的复制到其他的vDisk存储位置上。</p>

<p><strong><em>注意：</em></strong><em>将vDisk__部署在本地存储上并不会造成单点故障，因为Provisioning Service__的负载均衡技术可以让target devices__自动的在其他Provisioning Servers__之间做容错动作。</em></p>

<p>l  <strong>NAS</strong><strong>：</strong>NAS是一种基于文件级存储的solution。NAS协议包括CIFS和NFS。NAS vDisk可以被多个Provisioning Server同时所访问。NAS由于不需要vDisk复制功能所以能保证vDisk在一个场内的多台Provisioning Server之间保持连续性。</p>

<p><strong><em>注意：</em></strong><em>NAS__反而会造成单点故障，如果网络共享功能不可用，所有从这个vDisk__上Streamed__的target device__都会变得不可用了。</em></p>

<p>10)     <strong>决断：评估存储容量</strong></p>

<p>一个vDisk包含了一个VHD基础镜像文件、一个properties文件（.pvd），也可以能包含了一个链条VHD差异磁盘（.avhd）。每当一个vDisk被Provisioning Services versioing所更新时，一个新的差异磁盘就会被创建。</p>

<p>一个vDisk所占空间的评估因素大致有以下几点：</p>

<p>l  <strong>vDisk</strong><strong>的总容量：</strong>顾名思义</p>

<p>l  <strong>vDisk chain</strong><strong>的最大版本数：</strong>vDisk versioning简化了vDisk升级以及管理的负担，他能够更加灵活和健壮的管理vDisks。</p>

<p><strong><em>备注：</em></strong><em>太多的差异磁盘会显著降低Provisioning Services__的性能，建议不要超过5-7__个的版本数。</em></p>

<p>l  <strong>vDisk</strong><strong>版本变化百分比：</strong>差异磁盘的大小是随着对vDisk的改动多少而随着变化的。改得越多，差异磁盘的大小就越大。以下的计算公式可以用于计算vDisk容量：</p>

<p>举例如下：</p>

<p>比如你计划部署三个vDisk：</p>

<p>  Windows 7 (x64) image = 40GB</p>

<p>  Windows 7 (x86) image = 35GB</p>

<p>  Windows XP image = 20GB</p>

<p>每个vDisk都不会超过5个差异磁盘。预计一个差异磁盘大致是20%的主vDisk镜像文件大小，那么估计Provisioning Services存储所需要的空间如下：</p>

<p>11)     <strong>决断：</strong><strong>RAID</strong><strong>级别</strong></p>

<p>存储子系统的RAID级别会对应用程序和用户的工作负荷产生直接的影响。RAID 0、1以及10对读操作是最优，而RAID 5和6是对写操作是最优。对于Provisioning Services来说，不同的RAID级别有如下推荐配置：</p>

<p>Provisioning Services中vDisk主要是读操作，而对Write Cache来说主要是写操作。所以：</p>

<p>l  <strong>Write Cache</strong><strong>：</strong>推荐RAID 0、1、10因为这几种RAID的写惩罚较低</p>

<p>l  <strong>vDisk **</strong>存储：**推荐RAID 0、1、5、10，它可以让读操作分配到RAID中的其他磁盘中；</p>

<p>如果可能，建议将vDisk放在RAID5上，而写缓存放在RAID10上。如果vDisk和写缓存一定要放在一起，那么建议采用RAID10。</p>

<p>12)     <strong>决断：写缓存的位置</strong></p>

<p>写缓存可以有以下位置：</p>

<p>l  <strong>缓存在Target Device</strong><strong>的硬盘上：</strong>由于Provisioning Servers不用处理写请求，放在这里会减轻Provisioning Servers的资源消耗。尽管没有放在内存中这么快，这种方式的读写都是在本地，还是能提供快速的响应时间；<em>**</em></p>

<p>l  <strong>缓存在Target Device</strong><strong>的硬盘上永久保存：</strong>和第一种方式类似，区别在于用户重启之后存储永久保存。该功能目前还是测试阶段，仅在Windows 2008 R2和windows 7上支持。</p>

<p>l  <strong>缓存在Target Device</strong><strong>的内存中：</strong>尽管这种方式在性能上是最优的，但是如果RAM别耗尽了也会印象系统的稳定性；</p>

<p>l  <strong>缓存在Provisioning Server</strong><strong>的磁盘上：</strong>缓存在Provisioning Server的磁盘上作为临时文件存储。所有的写操作均发生在Provisioning Server服务器上。这样配置当然会增加Provisioning Server的磁盘IO操作和网络负担。配置上这种方式最为简单，不过这种方式下target device由于所有的到写缓存的读写请求都必须经过网络，target device的性能会受到较大影响。这种方式仅在POC阶段推荐！</p>

<p>l  <strong>缓存在Provisioning Server</strong><strong>的磁盘上永久保存：</strong>和上一种方式基本类似，区别在于用户重启之后存储永久保存。这种方式的好处在于target device能够保存对vDisk所做的改变，在重启之后也仍然保留。任何对vDisk的改变都会将缓存文件强制标记为失效状态。例如，如果vDisk被设置为Private Image Mode，一下所有的操作都会导致缓存文件被标记为失效状态：</p>

<p>n  o  Placing a vDisk in Maintenance mode</p>

<p>n  o  Mapping the drive from the console</p>

<p>n  o  Changing the location of the write cache file</p>

<p>n  o  Using Automatic update</p>

<p>写缓存包含了target device的MAC地址和磁盘识别符，他能独一无二的区分出每一台target device。一个target device可以被分配多个vDisk，因此，也可以关联多个缓存文件。</p>

<p>将写缓存部署在target device上是最为推荐的配置方法，因为既不用消耗而外的RAM内存，又不会减少Provisioning Servers的扩展性。</p>

<p>13)     <strong>决断：写缓存的大小</strong></p>

<p>写缓存的大小取决于很多隐私，一般来说都是基于评估和典型的用户配置文件大小。一般来说应当能够存储一下数据：</p>

<p>n  Temporary application data</p>

<p>n  User profile temp files</p>

<p>n  Windows Event Logs</p>

<p>n  Citrix Logs</p>

<p>n  Antivirus pattern files</p>

<p>n  Citrix Application Streaming/Microsoft App-V Cache</p>

<p><em>备注：启用了用户配置文件重定向操作能减少写缓存所需要的大小。</em></p>

<p>写缓存的大小极大程度上取决于安装或者是Streamed到vDisk上的应用程序的大小以及用户配置文件的大小。推荐配置的起点是2GB。对于大部分虚拟桌面来说，我们有如下推荐配置：</p>

<p>此外，Windows的pagefile也会写入和写缓存同样的磁盘中，所以：</p>

<p>例如，如果Windows 7的vDisk设计是1.5GB的pagefile，那么写缓存的一个安全的评估数据应该是：</p>

<p>不过由于Hypervisor都不能将磁盘精确到小数点后，我们姑且分配4GB的空间吧。</p>

<p>14)     <strong>决断：</strong><strong>vDisk</strong><strong>的格式</strong></p>

<p>Provisioning Services支持固定磁盘以及动态磁盘格式。</p>

<p>l  <strong>固定磁盘格式：</strong>对于私有模式（private mode）的vDisk，固定尺寸大小的vDisk可以对存储vDisk磁盘上进行的磁盘碎片整理操作，这对写操作的性能提升会有帮助。不过在私有模式下，访问vDisk受限于一个target device，我们说仅当对vDisk进行维护模式时才有实际意义。</p>

<p>l  <strong>动态磁盘：</strong>相比较而言他需要更少的磁盘空间，但是在写操作上性能会显著降低。尽管在共享模式下（Shared Mode）的vDisk不会对vDisk执行写操作，不过对完成vDisk合并时所要花费的时间会增加许多。</p>

<p>15)     <strong>决断：</strong><strong>vDisk</strong><strong>的大小</strong></p>

<p>vDisk的大小主要取决于操作系统以及安装在操作系统上的应用程序的多少，我们预估的大小如下表所示：</p>

<p>vDisk的大小如果设置的太小或者是太大，日后我们还可以在Provisioning Services中调整。为了精确的评估vDisk的大小，请遵循以下的准则：</p>

<p>l  <strong>Target Device</strong><strong>的空间：</strong>确认目前作为主target device服务的计算机所正在使用的磁盘空间大小；<em>**</em></p>

<p>l  <strong>应用程序大小：</strong>当应用程序安装时，所需要的空间也在增长。计划大25%的增长</p>

<p>16)     <strong>决断：</strong><strong>vDisk</strong><strong>复制</strong></p>

<p>如果vDisk是存储在DAS上就需要在他自己有变化的时候复制到其他DAS上。Provisioning Services支持vDisk从本地复制到Provisioning Servers上，也可以支持在使用共享存储时跨越多个站点之间的复制。复制可以是手动或者是自动：</p>

<p>l  <strong>手动复制：</strong>简单，但是更耗时；</p>

<p>l  <strong>自动复制：</strong>大型环境下自动复制更快。一些自动化工具，例如Microsoft DFS-R还支持带宽控制。唯一缺点是如果复制出错，管理员还不支持，除非复制平台支持复制重传。</p>

<p>17)     <strong>决断：微软</strong><strong>Volume Licensing</strong></p>

<p>Provisioning Services支持Microsoft Key Management Service (KMS)和Multiple Activation Key (MAK) volume licensing。</p>

<p>l  <strong>KMS Volume Licensing</strong><strong>：</strong>可以在用户的本地网络上激活，无需连接到微软的网站。一台KMS服务器支持不受限的JMS客户端。微软公司推荐部署两台KMS服务器。<em>**</em></p>

<p>n  Office 2010的部署只支持KSM激活方式；</p>

<p>l  <strong>MAK Volume Licensing</strong><strong>：</strong>MS的一次性激活方式。</p>

<p>18)     <strong>决断：高可用</strong></p>

<p>Provisioning Services是虚拟桌面基础架构中最重要的组成部分，因此为了避免单点故障，需要考虑一下推荐步骤：</p>

<p>l  <strong>MAK Volume Licensing</strong><strong>：</strong>MS的一次性激活方式。</p>

<p>l  <strong>数据库：</strong>Provisioning Services支持两种数据库的高可用方式：</p>

<p>n  离线的数据库；</p>

<p>n  镜像数据库</p>

<p>l  <strong>Provisioning Servers</strong><strong>（PVS</strong><strong>服务器）：</strong>所有在一个站点之间的Provisioning Servers都能够被配置为向target device提供同一个vDisk。每个站点最少部署两台PVS服务器。</p>

<p>n  Provisioning Services启动文件应当配置为高可用。在启动文件中可以配置高达4台PVS服务器的列表。Target Device会按照顺序连接这些PVS服务器。后续所响应的服务器可以不是当初提供Streaming服务的服务器。当然，我们也可以配置负载均衡。</p>

<p>l  <strong>vDisk</strong><strong>和存储：</strong>对于DAS上存储的vDisk，应当做好同步操作。对于NAS上的vDisk，NAS存储必须提供一条高可用的网络共享连接；</p>

<p>l  <strong>网络：</strong>Provisioning Servers（PVS服务器）的网卡应当配置为Teamed。</p>

<p>19)     <strong>决断：带宽需求</strong></p>

<p>带宽评估对于整体性能是有至关重要的，特别是当Target Device启动的时候。带宽是随着操作系统的不同而有所区别的。Target Device启动所需要的时间可以参考下面的公式：</p>

<p>例如，500个Windows 7的Target Devices在1G以太网下需要40M启动：</p>

<p>1.  1 GB Ethernet = 125MB/s</p>

<p>2.  500 targets x 40 MB = 20GB</p>

<p>3.  20GB/125MBs = 160 seconds</p>

<p>下面的表格列举了在10GB网络下启动500台不同操作系统的Target Device时大致的带宽和启动加载时间：</p>

<p>备注：防火墙会增加网络延迟，同时也会造成网络瓶颈，如果可能，最好禁用防火墙，如果实在不能避免，最好能开放一下端口的完全访问能力：</p>

<p>20)     <strong>决断：网络配置</strong></p>

<p>为PVS服务器提供10Gbps网络能提供最够需要的带宽，如果做不到的话，1Gbps也可以提供足够的带宽，但是有可能会成为PVS服务器的瓶颈。将多块网卡做Teaming处理能提供更高的吞吐量，增加网络性能，也能阻止网络的单点故障。下表列出了PVS服务器的网络配置属性，从最大容量到最小：</p>

<p>以下的NIC属性应当正确配置在PVS服务器以及Target Devices的NIC上：</p>

<p>简单地说，就是禁用Checksum Offloading属性；关闭Auto Negotiation，使用强制配置；启用Jumbo Frame。</p>

<p>21)     <strong>决断：交换机配置</strong></p>

<p>用于PVS服务器和Target Devices的网络交换机应当做一下优化：</p>

<p>l  <strong>生成树协议（Spanning Tree Protocol</strong><strong>）/PortFast</strong><strong>：</strong>禁用生成树协议，启用PortFast；</p>

<p>l  <strong>风暴控制 Storm Control</strong><strong>：</strong>在Cisco Catalyst交换机上将Unicast流量值设置大一些，或者是禁用Unicast Filtering。</p>

<p>l  <strong>Broadcast Helper</strong><strong>：</strong>启用之，这样可以转发PXE和TFTP流量；</p>

<p>22)     <strong>决断：</strong><strong>Bootstrap</strong><strong>交付</strong></p>

<p>在一个Target Device开始启动过程的时候，他会首先加载一个bootstrap程序，该程序会初始化Target Device和PVS服务器之间的流化会话过程。有三种方法让Target Device能收到bootstrap程序：</p>

<p>l  <strong>Broadcast Helper</strong><strong>：</strong>启用之，这样可以转发PXE和TFTP流量；</p>

<p>l  <strong>使用带有DHCP</strong><strong>选项的PXE</strong><strong>方式；</strong></p>

<p>l  <strong>使用不带有DHCP</strong><strong>选项的PXE</strong><strong>方式；</strong></p>

<p>l  <strong>使用Boot Device Manager</strong><strong>；</strong></p>

<p>在企业无法提供PXE或者是TFTP服务的情况下，或者是无法对DHCP Scope选项修改的情况下，可以考虑使用Boot Device Management工具通过一个ISO文件来提供bootstrap文件。</p>

<p>23)     <strong>决断：审计</strong></p>

<p>默认下审计功能是禁用的，管理员可以将将其打开。打开后该工具可以记录在Provisioning Services场内组件所做的配置修改记录，并将结果记录至数据库中。</p>

<p>24)     <strong>决断：防病毒</strong></p>

<p>大部分的防病毒软件都会是扫描所有的文件和系统进程，对性能影响很大。所以在PVS环境下必须优化防病毒软件的配置。请参见CTX124185 - Provisioning Services Antivirus Best Practices。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2013-05-07T10:31:30+08:00"><a href="/2013/05/07/top10-e5-85-a8-e7-90-83-e6-8e-92-e5-90-8d-e5-89-8d-e5-8d-81-e7-9a-84-e4-ba-91-e8-ae-a1-e7-ae-97-e5-85-ac-e5-8f-b8/">May 07, 2013</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2013/05/07/top10-e5-85-a8-e7-90-83-e6-8e-92-e5-90-8d-e5-89-8d-e5-8d-81-e7-9a-84-e4-ba-91-e8-ae-a1-e7-ae-97-e5-85-ac-e5-8f-b8/" rel="bookmark" title="Top10全球排名前十的云计算公司" itemprop="url">Top10全球排名前十的云计算公司</a></h1>
    
  </header>
  <div class="entry-content">
    <p>来自 <a href="http://www.intelligenthq.com/uncategorized/top-10-cloud-computing-companies/">http://www.intelligenthq.com/uncategorized/top-10-cloud-computing-companies/</a></p>

<p>Citrix榜上有名排名第三，这就是我看好CloudStack一年多的回报，国内CloudStack目前看还没有什么生机，希望能早点发展起来。</p>

<p>We all know change is constant, especially in technology. Look at Toshiba, a world leader and innovator in high technology. This week, the company made an interesting move and announced the opening of Toshiba’s first datacenter in Europe, located in France.</p>

<p>Toshiba Cloud &amp; Solutions Division is directed at professional markets, public and private-sector companies, and entities within the Toshiba Group. The creation of this datacenter is in line with the Group’s goal of accompanying its clients right from the design of IT products and solutions through to hosting related services tailored to specific needs.</p>

<p>The datacenter also hosts firms located in other regions, illustrating Toshiba’s broader ambitions. <a href="http://www.intelligenthq.com/wp-content/uploads/2012/10/Cloud-Computing.jpeg"><img src="http://www.intelligenthq.com/wp-content/uploads/2012/10/Cloud-Computing-180x110.jpg" alt="" /></a></p>

<p>“<em>Developing this first datacenter in Rhône-Alpes highlights the importance of the Grand Lyon project for Toshiba and embodies the group’s investment in the development of its Cloud offering</em>,<em>”</em>  explains Philippe Hartmanshenn, Managing Director of Toshiba Systèmes France’s Cloud &amp; Solutions Division.</p>

<p>“<em>This allows us to move both internal and external client resources and services offsite to our high-security servers – located in France. We also plan to use the datacenter to develop and integrate business solutions for our clients from every sector.”</em></p>

<p>__I felt the need to highlight this as it shows the importance of the cloud, as an important tool to innovation regardless of industry.</p>

<p><a href="http://www.intelligenthq.com/wp-content/uploads/2013/03/BeFunky_CloudComputingImage.jpg.jpg"><img src="http://www.intelligenthq.com/wp-content/uploads/2013/03/BeFunky_CloudComputingImage.jpg.jpg" alt="" /></a></p>

<p>So who are the Top 10 players of cloud computing services that has been making waves recently?</p>

<p><strong>1. Google</strong></p>

<p>Google Cloud is the approach of Google to provide enterprise solutions to companies. Google Cloud Platform allows you to build applications and websites, store and analyze data on Google’s infrastructure. Companies can build websites, applications and service on this platform. Apart from these Google also offers Google Apps for businesses, which is now growing. Google has recently unveiled a “patent pledge” that it hopes will shield cloud software and big data developers from  litigation. The pledge, which is like a non-aggression pact, covers ten patents related to Google’s MapReduce technology.</p>

<p><strong>2. Microsoft</strong></p>

<p>The foundations of the Cloud OS are Windows Server and Windows Azure, complemented by the full breadth of our technology solutions, such as SQL Server, System Center and Visual Studio. Together, these technologies provide one consistent platform for infrastructure, apps and data that can span your datacenter, service provider datacenters, and the Microsoft public cloud.</p>

<p><strong>3. Citrix</strong></p>

<p>Citrix Cloud Platform provides the latest and most advanced open source software platform to build highly scalable and reliable cloud computing environments. Citrix offers three form of cloud computing – Hosted public cloud, Hosted private cloud and On-premise private cloud; Recently as per Info-Tech Research Group, Citrix Cloud platform is announced the Champion in Cloud Management Vendor Landscape. Citrix recently announced the availability of CloudPortal™ Business Manager 2.0, a cloud services delivery platform that enables enterprises and service providers to unify the commerce, user management, provisioning and operational aspects of a cloud into a single cloud interface for delivering anything as a service (XaaS).</p>

<p>**4. Joyent
**
San Francisco infrastructure-as-a-service provider, Joyent is the high-performance cloud infrastructure company, offering the only solution specifically built to power real-time web and mobile applications. Recently with the combined efforts of Joyent and Xeround (a cloud database company), Joyent customers can now access free and highly available with zero management MYSQL database. Xeround relational database is only available for Joyent Cloud platform.</p>

<p>**5. CenturyLink
**
CenturyLink, 3rd largest telecommunication company in USA and an established leader in providing networking solutions and cloud hosting services. CenturyLink recently announced that it’s providing 100 Gigabyte per sec (Gbps) networking solutions and will continue to provide best cloud infrastructure and IT hosting solutions. Savvis, a subsidiary of CenturyLink has collaborated with VMware Cloud Applications Marketplace to provide wide variety of applications packages to its clients from various software and hardware vendors.</p>

<p><strong>6. Amazon</strong></p>

<p>Amazon EC2 is an Infrastructure as a Service Cloud Computing Platform provided by Amazon Web Services (AWS), which allows users to provision or deletion of virtual computers. Amazon is one of the true innovators in Web-based computing, offering pay-as-you-go access to virtual servers and data storage space. Recently Amazon announced AWS CloudHSM, a new service enabling customers to increase data security and meet compliance requirements by using dedicated Hardware Security Module (HSM) appliances within the AWS Cloud. The CloudHSM service allows customers to securely generate, store and manage cryptographic keys used for data encryption in a way that keys are accessible only by the customer.</p>

<p><strong>7. IBM</strong></p>

<p>IBM Smart Cloud – IBM’s enterprise-class public cloud infrastructure-as-a-service (IaaS)delivers secure and scalable hosted IT infrastructure with on-demand access to virtual server and storage resources. BM recently announced global availability for its cloud service on five continents—plus a new center opening in Spain—based on its industry-leading sourcing business to host SAP applications and other core operations. Now clients can turn to cloud computing for enterprise applications while reducing the overall cost of IT and at the same time, expanding online access and investing in innovative analytics, social business and mobile computing.</p>

<p><strong>8. Salesforce</strong></p>

<p>Salesforce.com’s CRM solution is broken down into several broad categories: Sales Cloud, Service Cloud, Data Cloud, Collaboration Cloud and Custom Cloud. Saleforce is aiming be the first cloud computing company to hit the $4 billion annual revenue by 2014 and you can assume this from its 3rd quarter earnings. Salesforce will concentrate on social media, mobile computing and real time in a project it refers to as Cloud 2.</p>

<p><strong>9. Rackspace</strong></p>

<p>Rackspace, an open cloud company is delivering enterprise-level hosting services to businesses of all sizes and kinds around the world since 1998 and have grown to serve more than 190,000 customers. Rackspace integrates the industry’s best technologies for each customer’s specific need and delivers it as a service via its commitment to fanatical support. Rackspace recently opened the doors to its Open Cloud Academy by launching a pilot training program. The Open Cloud Academy is an educational program designed to provide students with affordable IT certifications, specifically around open cloud technologies.</p>

<p><strong>10. Verizon Terremark</strong></p>

<p>Verizon started its cloud computing services as a part of its enterprise solutions. Its infrastructure services have helped many of the world’s top enterprises improve IT performance and evolve business processes. Verizon Terremark sets the standard for IT deployments with advanced infrastructure and managed service offerings that deliver the scale, security, and reliability necessary to meet the demanding requirements of enterprises and governments around the world. Terremark launched its Enterprise Cloud Private Edition a single-tenant environment and its OS- and network-agnostic strategy shows the telco cloud understands the value of accessibility and integration.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2013-05-02T12:22:36+08:00"><a href="/2013/05/02/xendesktop-e8-99-9a-e6-8b-9f-e6-a1-8c-e9-9d-a2-e7-b2-be-e5-93-81-e4-b9-a6-e7-b1-8d-e5-af-bc-e8-af-bbpart4/">May 02, 2013</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2013/05/02/xendesktop-e8-99-9a-e6-8b-9f-e6-a1-8c-e9-9d-a2-e7-b2-be-e5-93-81-e4-b9-a6-e7-b1-8d-e5-af-bc-e8-af-bbpart4/" rel="bookmark" title="XenDesktop虚拟桌面精品书籍导读(part4)" itemprop="url">XenDesktop虚拟桌面精品书籍导读(part4)</a></h1>
    
  </header>
  <div class="entry-content">
    <p>[su_box color=”orange” icon=”flag”]
感谢 Eric Yao 的供稿，<a href="http://weibo.com/ericyaozhen">@老树皮Eric</a>
[/su_box]</p>

<p>桌面虚拟化项目的实施白皮书 《Citrix Virtual Desktop Handbook 5.x》，<a href="http://support.citrix.com/article/CTX136546">点击下载</a>。</p>

<h2 id="control-layer">四、      控制层 Control Layer</h2>

<p>控制层是设计架构的第四层。在上面有关用户的三个层面我们所做的决定都会汇总起来到控制层。</p>

<ol>
  <li>访问控制器</li>
</ol>

<p>访问控制器子层的职责是给每个用户提供予以支持访问控制层的基础架构组件。这么说可能比较绕口，那就换个说法吧，访问控制器一般包括例如Web Interface、StoreFront，以及NetScaler Access Gateway；</p>

<p>1)        远程访问架构</p>

<p>如果有用户需要远程或者是离线的移动访问能力，那么就要设计远程访问基础架构了。</p>

<ol>
  <li><strong>A.        **</strong>决断：拓扑**</li>
</ol>

<p>网络拓扑的设计对远程访问架构能够支撑功能性、性能以及安全性至关重要。远程访问架构应当和安全团队一起合作以确保符合企业的安全规范。以下三种主要的拓扑结构我们在设计师可以考虑，每种的安全性逐渐递增：</p>

<p>l  <strong>1-Arm (Normal Security</strong><strong>，单臂模式)</strong><strong>：</strong>在这种架构下，Access Gateway使用一个物理的或者是逻辑的Bonded的网络接口，再加上VLAN和IP子网的设计，来传递用户和后台虚拟桌面的流量。</p>

<p>l  <strong>2-Arm (High Security **</strong>双臂模式)<strong>**：</strong>在双臂模式下，Access Gateway利用两张或者更多的物理或者逻辑Bonded的网络接口卡，再加上VLAN和IP子网的设计，来传递用户和后台虚拟桌面的流量。前段用户的流量被导向这些网络接口卡的第一张网卡上，前后端的流量是被分离设计的，就是说说后端虚拟桌面架构服务器的流量是被定向到第二张网卡上的。通过这样的设计我们就可以DMZ区来分离前后端的流量，同时还可以定制防火墙策略和流量监控策略。<em>**</em></p>

<p>l  **Double-Hop DMZ (Very High Security): **这种模式既利用了双臂拓扑下的特性，又使用了两个单独的Access Gateway设备。有一些企业使用了三个物理的/逻辑的防火墙结构来保护他们的内部网络。这三个防火墙将DMZ区划分为两个区域来提供额外的内部网络安全。</p>

<p>在第一个DMZ区的Access Gateway设备处理用户的连接，完成SSL VPN的安全功能。这个Access Gateway设备加密客户端连接，判断用户的认证方式，控制能够访问的内部网络服务器；</p>

<p>第二个DMZ区域的Access Gateway设备充当与一个代理设备角色。这个Access Gateway设备启用ICA协议将客户端连接穿越第二个DMZ区到后端的服务器场。在第一个DMZ区的Access Gateway设备和内部网络的Secure　Ticket　Authority（STA）也是通过第二个DMZ区的Access Gateway设备来进行代理的。</p>

<ol>
  <li><strong>B.        **</strong>决断：平台**</li>
</ol>

<p>在Access Gateway部分，我们曾经讨论过只要是涉及到远程访问，我们都会考虑NetScaler Access　Gateway设备。问了确定合适的NetScaler平台来满足项目需求，必须确定一些关键资源。由于所有的远程访问流量都是通过SSL（安全套接层）来加密，再通过HTTPs的HTTP（超文本协议）协议来传输。所以有两种资源metric需要确认：</p>

<p>l  <strong>SSL</strong><strong>吞吐量：</strong>SSL吞吐量是定义为每秒钟能处理的GB SSL流量；</p>

<p>l  <strong>SSL</strong><strong>每秒交易量（TPS</strong><strong>）：</strong>TPS metric定义在每秒每个应用程序交付控制器（ADC）能处理的SSL交易数量</p>

<p>关于这两个参数的更详细解释，可以参考：<a href="http://assets.citrix.com/NetScaler_0911/ASSETS/Citrix_2048_SSL_Best_Practices.pdf">Best Practices for implementing 2048-bit SSL</a></p>

<p>平均的SSL带宽开销在和虚拟桌面的开销比较起来时经常忽略。但是SSL带宽的计算将会有助于确定总带宽是否足够。固定带宽加上数据包头开销常常随着加密算法的不同而变化，总带宽开销也常常随着数据包尺寸大小的变化而不同。理想状态下，开销数字应当通过POC或者是Pilot来实际测试得来，但是在没有这些数据的情况下，在工作负荷带宽基础上加上2%是一个合理的数字。因此，在确定NetScaler平台的时候，SSL的吞吐量常常是最大并发带宽乘以1.02，即：</p>

<p>SSL吞吐量 = 最大并发带宽 × 1.02</p>

<p>例如：假设128M是最大的并发带宽，那么最合适的NetScaler模型应当计算为：</p>

<p>约130Mbps = 128M × 1.02</p>

<p>NetScaler有三种平台，每种都提供了大量的不同的扩展性：</p>

<p>l  <strong>VPX</strong><strong>：</strong>VPX平台的NetScaler和硬件的NetScaler提供完全一致的功能，不过他只适合于小型的测试环境使用。<em>**</em></p>

<p>l  <strong>MDX</strong><strong>：</strong>NetScaler MDX是NetScaler设备的硬件版本。他能支持大型网络可扩展环境；<em>**</em></p>

<p>l  <strong>SDX</strong><strong>：</strong>NetScaler SDX设备是在物理NetScaler设备和虚拟NetScaler设备之间的一个桥梁。一个SDX设备能够划分为多个虚拟的NetScaler设备。<em>**</em></p>

<p>2)        StoreFront</p>

<p>Citrix StoreFront是Web Interface的下一代产品，它验证用户连接到后台的XenDesktop站点、XenApp场，以及AppController（SaaS应用），然后枚举或者是聚合可用的桌面和应用程序到商店以便让用户通过不同操作系统平台上的Receiver来访问，包括安卓、iOS、Linux、Windows、Win8/RT以及Web站点。</p>

<ol>
  <li><strong>C.         **</strong>决断：Web Interface<strong>**还是StoreFront</strong></li>
</ol>

<p>Web Interface和StoreFront是两种不同的解决方案，在一些功能方面有重叠。所以我们要认真评估我们的需求。一般来说，新的方案应该使用StoreFront，因为Web Interface已经不再有新功能添加了。可以参考下面的链接了解Citrix 桌面产品的生命周期：<a href="http://www.citrix.com/support/product-lifecycle/milestones/xendesktop.html">Lifecycle Milestones for Citrix XenDesktop</a></p>

<p>下面的表格也示例了在何种情况下该使用什么产品：</p>

<p>下面的表格对两种产品在未来功能的开发目标上进行了一个对比，Web Interface已经不再会有革命性的功能添加了：</p>

<p>下面的表格是功能对比：</p>

<p>有一些Web Interface有的功能也会被完全整合到未来的StoreFront新版本中去：</p>

<ol>
  <li><strong>A.        **</strong>决断：Web <strong>**服务的高可用</strong></li>
</ol>

<p>如果StoreFront服务器不可用，或者是其他对应的Web服务不可用了，那么用户就不能连接到新的会话，例如打开新的虚拟桌面，无法打开应用程序等操作，因此，至少需要规划两台StoreFront来预防单点故障问题。我们可以考虑的方案包括：</p>

<p>l  <strong>DNS Round Robin</strong><strong>：</strong>在多个服务器之间提供基本的负载均衡功能，无法做到是否可用性的检查；在服务器宕机时，部分用户会受到影响。<em>**</em></p>

<p>l  <strong>Windows NLB</strong><strong>：</strong>是Windows的一个服务。可以做一些基本的检查来判断服务器是否可用，但是无法判断单个服务的状态。</p>

<p>l  <strong>Citrix NetScaler</strong><strong>：</strong>智能硬件设备，能检查StoreFront服务的状态，根据用户请求主动激活负载均衡状态。</p>

<ol>
  <li><strong>B.        **</strong>决断：应用程序订阅数据库的高可用**</li>
</ol>

<p>StoreFront的配置数据都存储在每一台StoreFront服务器的本地，然后被复制到服务器组中的其他的系统中。对比之下，用户应用程序订阅信息存储在应用程序订阅数据库中，该数据库可以是本地的StoreFront服务器，也可以是推荐的一个专门的Microsoft SQL Server。</p>

<p>如果应用程序订阅数据库不可用，以下功能将不可用：</p>

<p>l  用户不能在管理他们的应用程序订阅；</p>

<p>l  无法登陆至Web 方式的Reciever，但是已经建立起来的会话可以继续正常工作；</p>

<p>为了防止应用程序订阅数据库成为单点故障点，Citrix推荐SQL的高可用方案：</p>

<p>l  <strong>自动容错的SQL</strong><strong>镜像：</strong>数据库镜像提供了一种比数据库Clustering更简单的快速容错方法。数据库镜像技术在每一个镜像点上需要一个标准的SQL标准版服务器License，在加上一个witness服务器的SQL Express License即可。更多细节可以参考文档：<a href="http://support.citrix.com/proddocs/topic/dws-storefront-12/dws-configure-conf-file.html">Configuring StoreFront using the Configuration Files.</a><em>**</em></p>

<p>l  <strong>SQl Clustering: **微软的技术，不过老实说，相比较Mirroring技术配置太复杂，此外，自动容错的过程也更慢。在License上，每个Cluster节点都需要一个企业版的SQL license。</strong>**</p>

<p>l  <strong>Hypervisor</strong><strong>高可用：</strong>数据库部署在一台虚拟机上，通过Hypervisor的高可用来实现。这个技术比镜像或者是clustering都要便宜，因为只需要一个SQl Express License和一台SQL Server（需要一个具备HA功能的Hypervisor License）。不过，这个技术容错过程较慢，也仅仅是当SQl Server的操作系统宕机时才能启动容错机制。如果数据库服务出现错误是无法被Hypervisor层检测到的。</p>

<p><em>注意：未来的StoreFront__版本将不会再使用应用程序订阅数据库（Application Subscription Database__），相反，预订信息会自动的在StoreFront__服务器组中的StoreFront__服务器中自动复制。</em></p>

<ol>
  <li><strong>C.         **</strong>决断：容量规划**</li>
</ol>

<p>基于扩展性的测试，单个StoreFront服务器可以支持的用户数是无限制的，受限制的是在这个服务器上每小时之内用户同时操作的动作。这是因为仅仅当用户执行一个动作的时候，例如在Receiver中订阅一个应用程序是，StoreFront才被使用。当用户连接到所发布的资源时，StoreFront实际上是idle状态的。因此，下面的表格所展示的内容介绍的是没鸟的请求时，或者是每小时的请求数。我们建立了一个前提条件是每用户在每小时之内启动了五个应用程序，订阅了2个应用程序，取消订阅了一个应用程序，总共每小时是8个操作量。</p>

<p>注意：上述数字是在仿真环境下测试得来：基于SSL的XenApp6.5，发布了100+个应用程序，每个用户在5秒钟之内完成操作的。</p>

<p>StoreFront对CPU的数量更敏感，也就是说对CPU的消耗更大，而不是对内存消耗更大。推荐的企业StoreFront服务器是4个vCPU和4GB RAM。</p>

<ol>
  <li><strong>D.        **</strong>但服务器扩展性 – <strong>**应用程序订阅数据库</strong></li>
</ol>

<p>应用程序订阅数据库包含了每个用户订阅的一系列资源列表情况。基于测试环境下，推荐的一个储存应用程序订阅数据库独立SQL服务器的配置是4vCPU和4GB RAM。</p>

<p>数据库的增长速度大约是每个订阅10KB空间消耗：</p>

<p>数据库大小 = （用户数 × 每用户的订阅数） × 10KB</p>

<p>1个订阅 = 1个用户订阅一个应用程序，例如，1000个用户订阅10个应用程序就是100MB。</p>

<ol>
  <li>桌面控制器</li>
</ol>

<p>这部分内容主要是介绍XenClient部分，请大家自行参见<a href="http://support.citrix.com/article/CTX136546">原始文档</a>。</p>

<p>下期预告：下一期我们介绍最后的部分：Provisioning Services</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2013-05-02T11:42:54+08:00"><a href="/2013/05/02/ask-the-architect-e6-8e-a8-e8-8d-90citrix-e8-99-9a-e6-8b-9f-e5-8c-96-e5-a4-a7-e5-b8-88-e4-b8-80-e5-90-8d/">May 02, 2013</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/2013/05/02/ask-the-architect-e6-8e-a8-e8-8d-90citrix-e8-99-9a-e6-8b-9f-e5-8c-96-e5-a4-a7-e5-b8-88-e4-b8-80-e5-90-8d/" rel="bookmark" title="Ask the Architect 推荐Citrix虚拟化大师一名" itemprop="url">Ask the Architect 推荐Citrix虚拟化大师一名</a></h1>
    
  </header>
  <div class="entry-content">
    <p><a href="http://virtualfeller.com/">http://virtualfeller.com/</a></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="/page30/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="/page29/">29</a></li>
      
    
      
        
        
        
        <li><a href="/page30/">30</a></li>
      
    
      
        <li><strong class="current-page">31</strong></li>
      
    
      
        
        
        
        <li><a href="/page32/">32</a></li>
      
    
      
        
        
        
        <li><a href="/page33/">33</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="/page93/">93</a></li>
    

    
    
      <li><a href="/page32/" class="btn">Next</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Martin Liu. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>



          

</body>
</html>